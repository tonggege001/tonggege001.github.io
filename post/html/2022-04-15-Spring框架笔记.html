<!DOCTYPE html><html><head>
      <title>2022-04-15-Spring&#x6846;&#x67B6;&#x7B14;&#x8BB0;</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css">
      
      
      
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js"></script>
      
      
      
      
      
      <style>
      pre{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;padding:1em;margin:.5em 0;overflow:auto;line-height:1.5;tab-size:4;hyphens:none;color:#2b3f6a;background-color:#eee9dd !important;border:#ddd3bb;border-radius:3px}pre[class*="language-"]{padding:1em}code[class*="language-"] .token.comment,pre[class*="language-"] .token.comment,code[class*="language-"] .token.prolog,pre[class*="language-"] .token.prolog,code[class*="language-"] .token.doctype,pre[class*="language-"] .token.doctype,code[class*="language-"] .token.cdata,pre[class*="language-"] .token.cdata{color:#9ca3b0;font-style:italic}code[class*="language-"] .token.punctuation,pre[class*="language-"] .token.punctuation{color:#9ca3b0}code[class*="language-"] .namespace,pre[class*="language-"] .namespace{opacity:.7}code[class*="language-"] .token.constant,pre[class*="language-"] .token.constant{color:#c16161}code[class*="language-"] .token.boolean,pre[class*="language-"] .token.boolean,code[class*="language-"] .token.number,pre[class*="language-"] .token.number,code[class*="language-"] .token.function-name,pre[class*="language-"] .token.function-name{color:#c16161}code[class*="language-"] .token.tag,pre[class*="language-"] .token.tag{color:#ac4343}code[class*="language-"] .token.symbol,pre[class*="language-"] .token.symbol{color:#8f932b}code[class*="language-"] .token.selector,pre[class*="language-"] .token.selector{color:#d08e25}code[class*="language-"] .token.attr-name,pre[class*="language-"] .token.attr-name{color:#d08e25}code[class*="language-"] .token.string,pre[class*="language-"] .token.string{background-color:rgba(255,204,0,0.03);color:rgba(106,68,28,0.77)}code[class*="language-"] .token.char,pre[class*="language-"] .token.char{color:#8f932b}code[class*="language-"] .token.url,pre[class*="language-"] .token.url{color:#d08e25}code[class*="language-"] .token.atrule,pre[class*="language-"] .token.atrule,code[class*="language-"] .token.attr-value,pre[class*="language-"] .token.attr-value,code[class*="language-"] .token.keyword,pre[class*="language-"] .token.keyword{color:#8f932b}code[class*="language-"] .token.function,pre[class*="language-"] .token.function{color:#d08e25}code[class*="language-"] .token.class-name,pre[class*="language-"] .token.class-name{color:#2b3f6a}code[class*="language-"] .token.variable,pre[class*="language-"] .token.variable{color:#5e78e1}code[class*="language-"] .token.regex,pre[class*="language-"] .token.regex,code[class*="language-"] .token.important,pre[class*="language-"] .token.important{color:#379566}code[class*="language-"] .token.important,pre[class*="language-"] .token.important,code[class*="language-"] .token.bold,pre[class*="language-"] .token.bold{font-weight:bold}code[class*="language-"] .token.italic,pre[class*="language-"] .token.italic{font-style:italic}code[class*="language-"] .token.entity,pre[class*="language-"] .token.entity{cursor:help}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:rgba(153,122,102,0.08);background:linear-gradient(to right, rgba(153,122,102,0.1) 70%, rgba(153,122,102,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:rgba(153,122,102,0.4);color:#f5f2f0;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px white}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}body{font-size:16px;background-color:#f3f2ee;font-family:"PT Serif",'Times New Roman',Times;color:#1f0909;line-height:1.5em}body ol,body ul{list-style:none}body blockquote,body q{quotes:none}body blockquote:before,body blockquote:after,body q:before,body q:after{content:'';content:none}body table{border-collapse:collapse;border-spacing:0}body h1,body h2,body h3,body h4,body h5,body h6{font-weight:bold}body h1{font-size:1.875em;line-height:1.6em;margin-top:2em}body h2,body h3{font-size:1.3125em;line-height:1.15;margin-top:2.285714em;margin-bottom:1.15em}body h3{font-weight:normal}body h4{font-size:1.125em;margin-top:2.67em}body h5,body h6{font-size:1em}body h1{border-bottom:1px solid;margin-bottom:1.875em;padding-bottom:.8125em}body a{text-decoration:none;color:#065588}body a:hover,body a:active{text-decoration:underline}body p,body blockquote,body .md-fences{margin-bottom:1.5em}body h1,body h2,body h3,body h4,body h5,body h6{margin-bottom:1.5em}body blockquote{font-style:italic;border-left:5px solid;margin-left:2em;padding-left:1em}body ul,body ol{margin:0 0 1.5em 1.5em}body ol li{list-style-type:decimal;list-style-position:outside}body ul li{list-style-type:disc;list-style-position:outside}body li>p{margin-top:0;margin-bottom:0}body .md-meta,body .md-before,body .md-after{color:#999}body table{margin-bottom:1.5em;font-size:1em}body thead th,body tfoot th{padding:.25em .25em .25em .4em;text-transform:uppercase}body th{text-align:left}body td{vertical-align:top;padding:.25em .25em .25em .4em}body code,body .md-fences{color:inherit;background-color:#dadada;padding-left:1ch;padding-right:1ch}body pre code{background-color:inherit}body .md-fences{margin-left:2em;margin-bottom:3em}body .md-fences .CodeMirror.CodeMirror-wrap{top:-0.8em}body pre,body code,body tt{font-size:.875em;line-height:1.714285em}body h1{line-height:1.3em;font-weight:normal;margin-bottom:.5em}body p+ul,body p+ol{margin-top:-1em}body h3+ul,body h4+ul,body h5+ul,body h6+ul,body h3+ol,body h4+ol,body h5+ol,body h6+ol{margin-top:.5em}body li>ul,body li>ol{margin-top:inherit}body h2,body h3{margin-bottom:.75em}body hr{border-top:none;border-right:none;border-bottom:1px solid;border-left:none}body h1{border-color:#c5c5c5}body blockquote{border-color:#bababa;color:#656565;background-color:#e6e4dc}body thead.md-table-edit{background-color:transparent}body thead{background-color:#dadada}body tr:nth-child(even){background:#e8e7e7}body hr{border-color:#c5c5c5}body .task-list{padding-left:1rem}body .task-list-item{list-style-type:none;margin-left:-1.8em}body .task-list-item .task-list-item-checkbox{margin-right:.8em}body .task-list-item input:before{content:'\221A';display:inline-block;width:1.25rem;height:1.5rem;vertical-align:middle;text-align:center;color:#ddd;background-color:#F3F2EE}body .task-list-item input:checked:before,body .task-list-item input[checked]:before{color:inherit}body img{max-width:100%}body kbd{color:#1f0909}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="java-%E5%B8%B8%E8%A7%81%E6%A1%86%E6%9E%B6">Java &#x5E38;&#x89C1;&#x6846;&#x67B6;</h1>

<p>Hibernate: &#x5BF9;JDBC&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x5C01;&#x88C5;&#xFF0C;&#x4F7F;&#x5F97;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53EF;&#x4EE5;&#x50CF;&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x4E00;&#x6837;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<p>Structs: &#x662F;&#x6D41;&#x884C;&#x7684;&#x3001;&#x6210;&#x719F;&#x7684;&#x57FA;&#x4E8E;MVC&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6846;&#x67B6;&#x3002;</p>
<p>Structs+Hibernate: &#x6574;&#x5408;struts&#x548C;hibernate&#x7684;&#x57FA;&#x672C;&#x601D;&#x8DEF;&#x662F;&#x5C06;MVC&#x4E2D;M&#x5C42;&#x4EA4;&#x7ED9;hibernate&#x5904;&#x7406;.</p>
<p>Spring+Hibernate: &#x6574;&#x5408;Spring&#x4E0E;Hibernate&#xFF0C;&#x57FA;&#x672C;&#x601D;&#x8DEF;&#x662F;&#x5E38;&#x89C1;DAO&#x7684;&#x65F6;&#x5019;&#x6CE8;&#x5165;SessionFactory&#x3002;</p>
<p>Spring: Spring&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;IOC&#x4E0E;Aop&#x7684;&#x67B6;&#x6784;&#x591A;&#x5C42;j2ee&#x7CFB;&#x7EDF;&#x7684;&#x6846;&#x67B6;&#x3002;</p>
<p>SSH: Structs&#x3001;Spring&#x3001;Hibernate&#x4E09;&#x8005;&#x6574;&#x5408;&#x3002;</p>
<p>SpringMVC: &#x662F;&#x65F6;&#x4E0B;&#x6D41;&#x884C;&#x7684;MVC&#x6846;&#x67B6;&#xFF0C;&#x914D;&#x7F6E;&#x548C;&#x4F7F;&#x7528;&#x90FD;&#x5F88;&#x65B9;&#x4FBF;</p>
<p>Mybatis: &#x4E00;&#x6B3E;&#x5BF9;SQL&#x8FDB;&#x884C;&#x8F7B;&#x91CF;&#x7EA7;&#x5C01;&#x88C5;&#x7684;&#x9AD8;&#x6548;&#x7387;ORM&#x6846;&#x67B6;&#x3002;</p>
<p>SSM: Spring&#x3001;SpringMVC&#x3001;Mybatis&#x6574;&#x5408;&#xFF0C;&#x662F;&#x65F6;&#x4E0B;&#x6700;&#x6D41;&#x884C;&#x7684;&#x505A;&#x6CD5;&#x3002;</p>
<p>Spring Boot: &#x51E0;&#x4E4E;&#x4E0D;&#x7528;&#x914D;&#x7F6E;&#x7684;SSH/SSM&#x6846;&#x67B6;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x7406;&#x89E3;SSM&#x624D;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x4F7F;&#x7528;Spring Boot&#x3002;</p>
<h1 class="mume-header" id="spring-%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0">Spring &#x6846;&#x67B6;&#x6982;&#x8FF0;</h1>

<p>Spring&#x6709;&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x90E8;&#x5206;&#xFF1A;IOC&#x548C;Aop&#x3002;<br>
(1) IOC: &#x63A7;&#x5236;&#x53CD;&#x8F6C;&#xFF0C;&#x628A;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x8FC7;&#x7A0B;&#x4EA4;&#x7ED9;Spring&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x3002;<br>
(2) Aop: &#x9762;&#x5411;&#x5207;&#x9762;&#xFF0C;&#x4E0D;&#x4FEE;&#x6539;&#x6E90;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x529F;&#x80FD;&#x589E;&#x5F3A;&#x3002;</p>
<h1 class="mume-header" id="%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B">&#x5165;&#x95E8;&#x6848;&#x4F8B;</h1>

<h2 class="mume-header" id="1-%E4%B8%8B%E8%BD%BDspring">1. &#x4E0B;&#x8F7D;Spring</h2>

<ol>
<li>
<p>&#x4E0B;&#x8F7D;Spring Jar&#x5305;&#x65B9;&#x6CD5;<br>
&#x4E0B;&#x8F7D;&#x5730;&#x5740;: <a href="https://repo.spring.io/ui/native/release/org/springframework/spring">https://repo.spring.io/ui/native/release/org/springframework/spring</a></p>
</li>
<li>
<p>Maven&#x65B9;&#x6CD5;</p>
</li>
</ol>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>repository.spring.milestone<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Spring Milestone Repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.spring.io/milestone<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>

...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.0-M2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</pre><h2 class="mume-header" id="2-%E5%B8%B8%E8%A7%81java%E5%B7%A5%E7%A8%8B">2. &#x5E38;&#x89C1;Java&#x5DE5;&#x7A0B;</h2>

<h2 class="mume-header" id="3-%E5%AF%BC%E5%85%A5spring-jar%E5%8C%85">3. &#x5BFC;&#x5165;Spring jar&#x5305;</h2>

<p>Spring_dir/libs/xxx.jar &#x590D;&#x5236;&#x5230;project_dir/lib&#xFF0C;IDE&#x91CC;&#x5BFC;&#x5165;&#x3002;</p>
<h2 class="mume-header" id="4-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E7%9A%84%E7%B1%BB%E5%B9%B6%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E7%9A%84%E5%AF%B9%E8%B1%A1">4. &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7684;&#x7C7B;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7684;&#x5BF9;&#x8C61;</h2>

<p>Spring&#x4E2D;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x662F;&#x914D;&#x7F6E;&#x6216;&#x8005;&#x6CE8;&#x89E3;</p>
<h3 class="mume-header" id="%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95">&#x914D;&#x7F6E;&#x65B9;&#x6CD5;</h3>

<p>(1) Spring &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x662F;xml&#x683C;&#x5F0F;&#x6587;&#x4EF6;&#x3002;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token class-name">App</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token operator">:</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span>
<span class="token keyword keyword-import">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;bean1.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">App</span> user <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token class-name">App</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// &#x6839;&#x636E;id&#x503C;&#x83B7;&#x5F97;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h1 class="mume-header" id="ioc-%E5%AE%B9%E5%99%A8">IOC &#x5BB9;&#x5668;</h1>

<p>&#x5185;&#x5BB9;&#x5305;&#x62EC;&#xFF1A;</p>
<ol>
<li>IOC&#x5E95;&#x5C42;&#x539F;&#x7406;</li>
<li>IOC&#x63A5;&#x53E3;(BeanFactory)</li>
<li>IOC&#x64CD;&#x4F5C;Bean&#x7BA1;&#x7406;(&#x57FA;&#x4E8E;xml)</li>
<li>IOC&#x64CD;&#x4F5C;Bean&#x7BA1;&#x7406;(&#x57FA;&#x4E8E;&#x6CE8;&#x89E3;)</li>
</ol>
<h2 class="mume-header" id="1-ioc-%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86">1. IOC &#x5E95;&#x5C42;&#x539F;&#x7406;</h2>

<p>&#x63A7;&#x5236;&#x53CD;&#x8F6C;&#xFF0C;&#x662F;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#x7684;&#x4E00;&#x79CD;&#x8BBE;&#x8BA1;&#x539F;&#x5219;&#x3002;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x53EB;&#x4F9D;&#x8D56;&#x67E5;&#x627E;&#x3002;&#x901A;&#x8FC7;&#x63A7;&#x5236;&#x53CD;&#x8F6C;&#xFF0C;&#x5BF9;&#x8C61;&#x5728;&#x88AB;&#x521B;&#x5EFA;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7531;&#x4E00;&#x4E2A;&#x63A7;&#x5236;&#x7CFB;&#x7EDF;&#x5185;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x7684;&#x5916;&#x754C;&#x5B9E;&#x4F53;&#x5C06;&#x5176;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#x4F20;&#x9012;&#x7ED9;&#x5B83;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8BF4;&#x4F9D;&#x8D56;&#x88AB;&#x6CE8;&#x5165;&#x5230;&#x5BF9;&#x8C61;&#x4E2D;&#x3002;</p>
<p>&#x628A;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x548C;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x8C03;&#x7528;&#x8FC7;&#x7A0B;&#x4EA4;&#x7ED9;Spring&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x5C06;&#x8026;&#x5408;&#x5EA6;&#x964D;&#x4F4E;&#x3002;</p>
<h3 class="mume-header" id="xml%E8%A7%A3%E6%9E%90-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-%E5%8F%8D%E5%B0%84">xml&#x89E3;&#x6790;&#x3001;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x3001;&#x53CD;&#x5C04;</h3>

<p>&#xFF08;1&#xFF09; xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x914D;&#x7F6E;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.UserDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#xFF08;2&#xFF09; &#x5728;&#x6709;service&#x7C7B;&#x548C;dao&#x7C7B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x521B;&#x5EFA;&#x5DE5;&#x5382;&#x7C7B;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-class">class</span> <span class="token class-name">UserFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token class-name">UserDao</span> <span class="token function">getDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// xml &#x89E3;&#x6790; + &#x53CD;&#x5C04; &#x751F;&#x6210;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;new</span>
        <span class="token class-name">String</span> classValue <span class="token operator">=</span> <span class="token keyword keyword-class">class</span>&#x5C5E;&#x6027;&#x4E2D;&#x7684;&#x503C;<span class="token punctuation">;</span> <span class="token comment">// xml&#x89E3;&#x6790;&#x5F97;&#x5230;</span>
        <span class="token comment">// &#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>classValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">)</span>clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8FD9;&#x6837;&#x5F53;&#x7C7B;&#x6539;&#x53D8;&#x6216;&#x8005;&#x7C7B;&#x7684;&#x8DEF;&#x5F84;&#x6539;&#x53D8;&#xFF0C;&#x5219;&#x53EA;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5373;&#x53EF;&#x3002;&#x8FDB;&#x4E00;&#x6B65;&#x964D;&#x4F4E;&#x8026;&#x5408;&#x5EA6;&#x3002;</p>
<h2 class="mume-header" id="2ioc-%E6%8E%A5%E5%8F%A3">2.IOC &#x63A5;&#x53E3;</h2>

<p><strong>1. IOC&#x601D;&#x60F3;&#x57FA;&#x4E8E;IOC&#x5BB9;&#x5668;&#x5B8C;&#x6210;&#xFF0C;IOC&#x5BB9;&#x5668;&#x5E95;&#x5C42;&#x5C31;&#x662F;&#x5BF9;&#x8C61;&#x5DE5;&#x5382;</strong><br>
<strong>2. Spring&#x4E2D;&#x63D0;&#x4F9B;IOC&#x5BB9;&#x5668;&#x5B9E;&#x73B0;&#x7684;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;&#xFF08;&#x4E24;&#x4E2A;&#x63A5;&#x53E3;&#xFF09;&#xFF0C;(1) BeanFactory, (2) ApplicationContext&#x3002;</strong></p>
<p><strong>BeanFactory</strong><br>
&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;BeanFacory&#x3002;IOC&#x5BB9;&#x5668;&#x6700;&#x57FA;&#x672C;&#x5B9E;&#x73B0;&#xFF0C;&#x5F00;&#x53D1;&#x4E2D;&#x4E00;&#x822C;&#x4E0D;&#x4F7F;&#x7528;&#x3002;<br>
&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65F6;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x83B7;&#x53D6;/&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x65F6;&#x624D;&#x4F1A;&#x521B;&#x5EFA;&#xFF0C;&#x4F8B;&#x5982;&#x4E0A;&#x9762;&#x7684;App&#x5BF9;&#x8C61;&#x5728;getBean()&#x65F6;&#x624D;&#x4F1A;&#x521B;&#x5EFA;&#x3002;</p>
<p><strong>ApplicationContext</strong><br>
BeanFactory&#x63A5;&#x53E3;&#x7684;&#x5B50;&#x63A5;&#x53E3;&#xFF0C;&#x63D0;&#x4F9B;&#x66F4;&#x591A;&#x66F4;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E00;&#x822C;&#x7531;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x3002;<br>
&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x628A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x3002;</p>
<ol start="3">
<li>ApplicationContext&#x5B9E;&#x73B0;&#x7C7B;<br>
ClassPathxxx, FileSystemXmlxxx&#xFF0C;&#x4E24;&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x540E;&#x8005;&#x9700;&#x8981;&#x5B8C;&#x5168;&#x7684;&#x8DEF;&#x5F84;&#x540D;&#x3002;</li>
</ol>
<h1 class="mume-header" id="ioc%E6%93%8D%E4%BD%9Cbean%E7%AE%A1%E7%90%86">IOC&#x64CD;&#x4F5C;Bean&#x7BA1;&#x7406;</h1>

<p>Bean&#x7BA1;&#x7406;&#x5C31;&#x662F;<strong>Spring&#x521B;&#x5EFA;&#x5BF9;&#x8C61;</strong>&#x3001;<strong>Spring&#x6CE8;&#x5165;&#x5C5E;&#x6027;</strong>&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;add...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5C06;name&#x503C;&#x8BBE;&#x7F6E;&#x3002;</p>
<h2 class="mume-header" id="%E5%9F%BA%E4%BA%8Exml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%96%B9%E5%BC%8F">&#x57FA;&#x4E8E;xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;</h2>

<h3 class="mume-header" id="%E5%9F%BA%E4%BA%8Exml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1">&#x57FA;&#x4E8E;xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;</h3>

<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#x5728;spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;bean&#x6807;&#x7B7E;&#xFF0C;&#x6807;&#x7B7E;&#x91CC;&#x9762;&#x6DFB;&#x52A0;&#x5BF9;&#x5E94;&#x5C5E;&#x6027;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#x3002;</p>
<p>&#x5728;bean&#x6807;&#x7B7E;&#x91CC;&#x6709;&#x5F88;&#x591A;&#x5C5E;&#x6027;&#xFF0C;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x51E0;&#x4E2A;&#x5E38;&#x7528;&#x5C5E;&#x6027;&#xFF1A;<br>
<strong>id</strong>: &#x7ED9;&#x5BF9;&#x8C61;&#x53D6;&#x4E2A;&#x522B;&#x540D;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;getBean&#x7B49;&#x65B9;&#x6CD5;&#x83B7;&#x5F97;&#x3002;<br>
<strong>class</strong>: &#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x7684;&#x5168;&#x8DEF;&#x5F84;&#xFF08;&#x5305;+&#x7C7B;&#x540D;&#xFF09;<br>
<strong>name</strong>: id&#x4E0D;&#x80FD;&#x52A0;&#x7B26;&#x53F7;&#xFF0C;name&#x53EF;&#x4EE5;&#x52A0;&#x7B26;&#x53F7;&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x4EE5;&#x524D;&#x662F;&#x7ED9;&#x5176;&#x4ED6;&#x6846;&#x67B6;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x6267;&#x884C;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;</p>
<h3 class="mume-header" id="%E5%9F%BA%E4%BA%8Exml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7">&#x57FA;&#x4E8E;xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6CE8;&#x5165;&#x5C5E;&#x6027;</h3>

<p>DI(dependency injection)&#xFF1A;&#x662F;IOC&#x4E2D;&#x7684;&#x4E00;&#x79CD;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF0C;&#x8868;&#x793A;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#xFF0C;&#x6CE8;&#x5165;&#x5C5E;&#x6027;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Book</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">String</span> bname<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">String</span> bauthor<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">setBname</span><span class="token punctuation">(</span><span class="token class-name">String</span> bname<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>bname <span class="token operator">=</span> bname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">setBauthor</span><span class="token punctuation">(</span><span class="token class-name">String</span> bauthor<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>bauthor <span class="token operator">=</span> bauthor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x6709;&#x4E24;&#x79CD;&#x3002;<br>
<strong>&#x4E00;&#x79CD;&#x662F;&#x4F7F;&#x7528;setter&#x65B9;&#x6CD5;</strong>&#xFF1A;</p>
<ol>
<li>&#x521B;&#x5EFA;&#x7C7B;&#xFF0C;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x548C;&#x5BF9;&#x5E94;&#x7684;set&#x65B9;&#x6CD5;</li>
<li>&#x5728;spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x914D;&#x7F6E;&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#xFF0C;&#x914D;&#x7F6E;&#x5C5E;&#x6027;&#x6CE8;&#x5165;&#x3002;</li>
</ol>
<p>&#x903B;&#x8F91;&#x4E0A;&#x5148;&#x8C03;&#x7528;&#x9ED8;&#x8BA4;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;setter&#x65B9;&#x6CD5;&#x3002;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>book<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.Book<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&#x4F7F;&#x7528;property&#x5B8C;&#x6210;&#x5C5E;&#x6027;&#x6CE8;&#x5165;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x5E73;&#x51E1;&#x7684;&#x4E16;&#x754C;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proterty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bauthor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x8DEF;&#x9065;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x4E00;&#x79CD;&#x662F;&#x901A;&#x8FC7;&#x6709;&#x53C2;&#x6784;&#x9020;&#x51FD;&#x6570;&#x76F4;&#x63A5;new&#x51FA;&#x6765;</strong></p>
<ol>
<li>&#x521B;&#x5EFA;&#x7C7B;&#xFF0C;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x548C;&#x6709;&#x53C2;&#x6570;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li>
<li>&#x5728;spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x8FDB;&#x884C;&#x914D;&#x7F6E;</li>
</ol>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>book<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.Book<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x5E73;&#x51E1;&#x7684;&#x4E16;&#x754C;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bauthor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x8DEF;&#x9065;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--&#x6309;&#x7167;&#x53C2;&#x6570;&#x7F16;&#x53F7;&#x6CE8;&#x5165;&#xFF1A;--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>book<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.Book<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">idx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x5E73;&#x51E1;&#x7684;&#x4E16;&#x754C;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">idx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x8DEF;&#x9065;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><ol start="3">
<li>p&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x6CE8;&#x5165;&#xFF0C;&#x7B80;&#x5316;xml&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#xFF08;&#x8FD8;&#x662F;&#x7528;&#x7684;setter&#x65B9;&#x6CD5;&#x6CE8;&#x5165;&#xFF09;</li>
</ol>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>bname</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x5E73;&#x51E1;&#x7684;&#x4E16;&#x754C;<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>author</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x8DEF;&#x9065;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x8BBE;&#x7F6E;null&#x503C;</strong></p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>null</span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x5305;&#x542B;&#x7279;&#x6B8A;&#x7B26;&#x53F7;</strong></p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token comment">&lt;!-- &lt;&#x5357;&#x4EAC;&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token entity named-entity" title="&lt;">&amp;lt;</span>&#x5357;&#x4EAC;<span class="token entity named-entity" title="&gt;">&amp;gt;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[&lt;&lt;&#x5357;&#x4EAC;&gt;&gt;]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x6CE8;&#x5165;&#x5C5E;&#x6027;-&#x5916;&#x90E8;bean</strong><br>
(1) &#x521B;&#x5EFA;&#x4E24;&#x4E2A;service&#x7C7B;&#x548C;dao&#x7C7B;<br>
(2) &#x5728;service&#x8C03;&#x7528;dao&#x91CC;&#x9762;&#x7684;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserVice<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&#x5C5E;&#x6027;&#x503C;ref&#x8868;&#x793A;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;id --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x6CE8;&#x5165;&#x5C5E;&#x6027;-&#x5185;&#x90E8;bean</strong></p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ename<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Lucy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x5973;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--&#x5D4C;&#x5957;&#x5185;&#x90E8;Bean --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>department<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Department<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x5B89;&#x4FDD;&#x90E8;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x6CE8;&#x5165;&#x5C5E;&#x6027;-&#x7EA7;&#x8054;&#x8D4B;&#x503C;</strong></p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ename<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Lucy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x5973;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--&#x5D4C;&#x5957;&#x5185;&#x90E8;Bean --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>department<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--dept&#x7684;getter&#x5FC5;&#x987B;&#x63D0;&#x4F9B; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept.dname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x6280;&#x672F;&#x90E8;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Department<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x5B89;&#x4FDD;&#x90E8;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x6CE8;&#x5165;&#x96C6;&#x5408;&#x5C5E;&#x6027;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Stu</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> courses<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> maps<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sets<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">setCourses</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> courses<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>courses <span class="token operator">=</span> courses<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">setList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">setMaps</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> maps<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>maps <span class="token operator">=</span> maps<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">setSets</span><span class="token punctuation">(</span><span class="token class-name">Ste</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sets<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>sets <span class="token operator">=</span> sets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</pre><pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stu<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Stu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &#x6570;&#x7EC4;&#x7C7B;&#x578B;&#x6CE8;&#x5165;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>courses<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Java&#x8BFE;&#x7A0B;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>&#x6570;&#x636E;&#x5E93;&#x8BFE;&#x7A0B;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &#x5217;&#x8868;&#x7C7B;&#x578B;&#x6CE8;&#x5165;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>&#x5F20;&#x4E09;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>&#x674E;&#x56DB;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- map&#x7C7B;&#x578B;&#x6CE8;&#x5165;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JAVA<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PHP<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>php<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &#x96C6;&#x5408;&#x7C7B;&#x578B;&#x6CE8;&#x5165;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sets<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>MySQL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x6CE8;&#x5165;&#x5BF9;&#x8C61;&#x96C6;&#x5408;</strong></p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>courseList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>course1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ref</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>course2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ref</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>course1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Course<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>course2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Course<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>&#x628A;&#x96C6;&#x5408;&#x7C7B;&#x578B;&#x5C5E;&#x6027;&#x6CE8;&#x5165;&#x63D0;&#x53D6;&#x51FA;&#x6765;</strong><br>
&#x4F7F;&#x7528;&#x540D;&#x79F0;&#x7A7A;&#x95F4;:</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml">xmlns:util=&quot;http://springframework.org/schema/util&quot;

xsi:schemaLocation=&quot;original...
http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;
&quot;
</pre><p>&#x4F7F;&#x7528;util&#x6807;&#x7B7E;&#x5B8C;&#x6210;list&#x96C6;&#x5408;&#x6CE8;&#x5165;&#x62BD;&#x53D6;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">util:</span>list</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>CourseName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- or --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>course<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ref</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">util:</span>list</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><h2 class="mume-header" id="ioc-%E6%93%8D%E4%BD%9Cbean%E7%AE%A1%E7%90%86-factorybean">IOC &#x64CD;&#x4F5C;Bean&#x7BA1;&#x7406; (FactoryBean)</h2>

<p>Spring&#x4E2D;&#x6709;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#x7684;bean&#xFF0C;&#x4E00;&#x79CD;&#x666E;&#x901A;bean&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x90A3;&#x79CD;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x662F;&#x5DE5;&#x5382;bean(FactoryBean)&#x3002;</p>
<ul>
<li>&#x666E;&#x901A;bean: xml&#x4E2D;&#x5B9A;&#x4E49;&#x4EC0;&#x4E48;&#x7C7B;&#x578B;&#xFF0C;&#x5C31;&#x8FD4;&#x56DE;&#x4EC0;&#x4E48;&#x7C7B;&#x578B;</li>
<li>&#x5DE5;&#x5382;bean: xml&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x53EF;&#x80FD;&#x662F;&#x4E2A;&#x5DE5;&#x5382;bean&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x5176;&#x4ED6;&#x7C7B;&#x578B;&#x3002;</li>
</ul>
<p>&#x5DE5;&#x5382;bean&#x4F8B;&#x5B50;:</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token comment">// &#x5FC5;&#x987B;&#x8981;&#x5B9E;&#x73B0;FactoryBean &#x63A5;&#x53E3;</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">MyBean</span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Course</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
    <span class="token comment">// &#x8FD4;&#x56DE;bean</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Course</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-throws">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Course</span> course <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Course</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        course<span class="token punctuation">.</span><span class="token function">setCname</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> course<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Main</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">AppkicationContext</span> context <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;bean.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x4F20;&#x5165;&#x7684;&#x662F;Course.class&#xFF0C;&#x800C;&#x4E0D;&#x662F;MyBean.class &#x4E86;</span>
        <span class="token class-name">Course</span> course <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;myBean&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Course</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xxxxx</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &#x4F20;&#x5165;&#x7684;&#x662F;Factory --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><h3 class="mume-header" id="bean-%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F">Bean &#x7684;&#x4F5C;&#x7528;&#x57DF;</h3>

<ol>
<li>&#x5728;Spring&#x91CC;&#xFF0C;&#x8BBE;&#x7F6E;&#x521B;&#x5EFA;&#x7684;Bean&#x5B9E;&#x4F8B;&#x662F;&#x5355;&#x5B9E;&#x4F8B;&#x8FD8;&#x662F;&#x591A;&#x5B9E;&#x4F8B;&#x3002;</li>
<li>&#x5728;Spring&#x91CC;&#x9762;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;bean&#x662F;&#x5355;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x8BBE;&#x7F6E;&#x591A;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#xFF1A;bean&#x6807;&#x7B7E;&#x91CC;&#x6709;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;scope&#x6765;&#x8BBE;&#x7F6E;&#xFF0C;singleton(&#x5355;&#x5B9E;&#x4F8B;), prototype(&#x591A;&#x5B9E;&#x4F8B;), request(&#x5F88;&#x5C11;&#x7528;, &#x6BCF;&#x6B21;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x4F1A;&#x653E;&#x5230;Web&#x8BF7;&#x6C42;&#x7684;request&#x4E2D;), session(&#x5F88;&#x5C11;&#x7528;&#xFF0C;&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x5C06;&#x5BF9;&#x8C61;&#x653E;&#x5230;session&#x4E2D;)&#x3002;</li>
</ol>
<blockquote>
<p>&#x5355;&#x5B9E;&#x4F8B;&#xFF1A;&#x591A;&#x6B21;&#x8C03;&#x7528;context.getBean()&#x65F6;&#x90FD;&#x53EA;&#x83B7;&#x5F97;&#x540C;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002;<br>
&#x591A;&#x5B9E;&#x4F8B;&#x521B;&#x5EFA;&#x65F6;&#x673A;&#x662F;getBean()&#x65F6;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x6700;&#x5F00;&#x59CB;&#x83B7;&#x53D6;context&#x65F6;&#xFF0C;&#x4ED6;&#x4EEC;&#x521B;&#x5EFA;&#x65F6;&#x673A;&#x4E0D;&#x4E00;&#x6837;&#x3002;</p>
</blockquote>
<h3 class="mume-header" id="bean-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">Bean &#x7684;&#x751F;&#x547D;&#x5468;&#x671F;</h3>

<p>Bean&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x5982;&#x4E0B;&#xFF1A;<br>
(1)&#x901A;&#x8FC7;&#x6784;&#x9020;&#x5668;&#x521B;&#x5EFA;Bean&#x5B9E;&#x4F8B;&#xFF08;&#x65E0;&#x53C2;&#x6570;&#x6784;&#x9020;&#xFF09;<br>
(2)&#x4E3A;bean&#x7684;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x503C;&#xFF0C;&#x8C03;&#x7528;setters<br>
(3)&#x8C03;&#x7528;bean&#x7684;&#x521D;&#x59CB;&#x5316;&#x7684;&#x65B9;&#x6CD5;&#xFF08;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#xFF09;<br>
(4)bean&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E86;&#xFF08;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#xFF09;<br>
(5)&#x5F53;&#x5BB9;&#x5668;&#x5173;&#x95ED;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8C03;&#x7528;bean&#x7684;&#x9500;&#x6BC1;&#x65B9;&#x6CD5;&#xFF08;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#xFF09;</p>
<p>&#x914D;&#x7F6E;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token comment">&lt;!-- bean&#x7684;init-method&#x5C5E;&#x6027;&#x4E2D;&#x4F20;&#x5165;&#x9700;&#x8981;&#x8C03;&#x7528;&#x7684;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;&#x540D;&#xFF0C;&#x4E0D;&#x52A0;&#x62EC;&#x53F7;--&gt;</span>
<span class="token comment">&lt;!-- bean&#x7684;destroy-method&#x5C5E;&#x6027;&#x4E2D;&#x4F20;&#x5165;&#x9700;&#x8981;&#x8C03;&#x7528;&#x7684;&#x9500;&#x6BC1;&#x65B9;&#x6CD5;&#x540D;&#xFF0C;&#x4E0D;&#x52A0;&#x62EC;&#x53F7;--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.bean.Orders<span class="token punctuation">&quot;</span></span> <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initMethod<span class="token punctuation">&quot;</span></span> 
<span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>destroyMethod<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#x9500;&#x6BC1;context&#x65F6;&#x624D;&#x4F1A;&#x8C03;&#x7528;destroy&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">)</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>bean&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x6709;&#x4E03;&#x6B65;&#x3002;<br>
(2.9) &#x628A;bean&#x5B9E;&#x4F8B;&#x4F20;&#x9012;&#x7ED9;Bean&#x7684;&#x540E;&#x7F6E;&#x5904;&#x7406;&#x5668;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;<br>
(3.1) &#x628A;bean&#x5B9E;&#x4F8B;&#x4F20;&#x9012;&#x7ED9;Bean&#x7684;&#x540E;&#x7F6E;&#x5904;&#x7406;&#x5668;&#x65B9;&#x6CD5;</p>
<p>&#x521B;&#x5EFA;&#x7C7B;&#xFF0C;&#x5B9E;&#x73B0;&#x63A5;&#x53E3; BeanPostProcessor&#xFF0C;&#x521B;&#x5EFA;&#x540E;&#x7F6E;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x5176;&#x4E2D;&#x5B9E;&#x73B0;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x914D;&#x7F6E;&#x540E;&#x7F6E;&#x5904;&#x7406;&#x5668;&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">MyBeanPost</span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">BeanPostProcess</span> <span class="token punctuation">{</span>

    <span class="token comment">// &#x521D;&#x59CB;&#x5316;&#x4E4B;&#x524D;&#x4F1A;&#x8C03;&#x7528;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessBeforeInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword keyword-throws">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x521D;&#x59CB;&#x5316;&#x4E4B;&#x540E;&#x4F1A;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessAfterInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword keyword-throws">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x914D;&#x7F6E;&#x540E;&#x7F6E;&#x5904;&#x7406;&#x5668;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&#x624B;&#x673A;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- &#x5BF9;&#x6240;&#x6709;bean&#x90FD;&#x4F1A;&#x8C03;&#x7528;MyBeanPost&#xFF0C;&#x81EA;&#x52A8;&#x8C03;&#x7528;--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBeanPost<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyBeanPost<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><h2 class="mume-header" id="ioc%E6%93%8D%E4%BD%9Cbean%E7%AE%A1%E7%90%86-xml%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">IOC&#x64CD;&#x4F5C;Bean&#x7BA1;&#x7406; - XML&#x81EA;&#x52A8;&#x88C5;&#x914D;</h2>

<p>&#x4E0D;&#x7528;&#x5199;property&#x6765;&#x8BBE;&#x7F6E;&#x5C5E;&#x6027;&#x503C;&#x5C31;&#x662F;&#x81EA;&#x52A8;&#x88C5;&#x914D;&#x3002;&#x6839;&#x636E;&#x6307;&#x5B9A;&#x88C5;&#x914D;&#x89C4;&#x5219;&#xFF08;&#x5C5E;&#x6027;&#x540D;&#x79F0;&#x6216;&#x8005;&#x5C5E;&#x6027;&#x7C7B;&#x578B;&#xFF09;&#xFF0C;Spring&#x81EA;&#x52A8;&#x5C06;&#x5339;&#x914D;&#x7684;&#x5C5E;&#x6027;&#x503C;&#x8FDB;&#x884C;&#x6CE8;&#x5165;&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Dept</span> dept<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">setDept</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>dept <span class="token operator">=</span> dept<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Dept</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</pre><p>autowire&#x81EA;&#x52A8;&#x88C5;&#x914D;&#xFF0C;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;<br>
byName: &#x6839;&#x636E;&#x5C5E;&#x6027;&#x540D;&#x79F0;&#x6CE8;&#x5165;,<br>
byType: &#x6839;&#x636E;&#x5C5E;&#x6027;&#x7C7B;&#x578B;&#x88C5;&#x914D;<br>
&#x56E0;&#x4E3A;id&#x7684;dept&#x540D;&#x79F0;&#x76F8;&#x540C;&#xFF0C;&#x5219;&#x81EA;&#x52A8;&#x5C06;emp&#x7C7B;&#x578B;&#x7684;dept&#x5C5E;&#x6027;set&#x4E3A;&#x540D;&#x79F0;&#x4E3A;dept&#x7684;bean&#x3002;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Emp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autowire</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>byName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Dept<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#x5728;&#x5B9E;&#x9645;&#x4E2D;&#x4E00;&#x822C;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x7684;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x88C5;&#x914D;&#x3002;</p>
<h2 class="mume-header" id="ioc%E6%93%8D%E4%BD%9Cbean%E7%AE%A1%E7%90%86-%E5%BC%95%E7%94%A8%E5%A4%96%E9%83%A8%E7%9A%84%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6">IOC&#x64CD;&#x4F5C;Bean&#x7BA1;&#x7406; - &#x5F15;&#x7528;&#x5916;&#x90E8;&#x7684;&#x5C5E;&#x6027;&#x6587;&#x4EF6;</h2>

<p>&#x82E5;xml&#x7684;property&#x592A;&#x591A;&#xFF0C;&#x9700;&#x8981;&#x6539;xml&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5C06;property&#x653E;&#x5165;&#x5230;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x4F8B;&#x5B50;&#xFF1A;&#x76F4;&#x63A5;&#x914D;&#x7F6E;&#x5FB7;&#x9C81;&#x4F0A;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x6C60;&#x3001;&#x5F15;&#x7528;&#x5916;&#x90E8;&#x5C5E;&#x6027;&#x6587;&#x4EF6;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x6C60;&#x3002;</p>
<p>&#x76F4;&#x63A5;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driveClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/userDb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#x5F15;&#x7528;&#x5916;&#x90E8;&#x6587;&#x4EF6;&#x65B9;&#x6CD5;&#xFF1A;<br>
&#x521B;&#x5EFA;property&#x6587;&#x4EF6; -&gt; &#x628A;&#x5916;&#x90E8;properties&#x5C5E;&#x6027;&#x6587;&#x4EF6;&#x5F15;&#x5165;&#x5230;spring&#x914D;&#x7F6E;&#x6587;&#x4EF6; -&gt;</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// filename: jdbc.properties</span>
prop<span class="token punctuation">.</span><span class="token property-access">driverClass</span><span class="token operator">=</span>com<span class="token punctuation">.</span><span class="token property-access">mysql</span><span class="token punctuation">.</span><span class="token property-access">jdbc</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Driver</span></span>
prop<span class="token punctuation">.</span><span class="token property-access">url</span><span class="token operator">=</span>jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>userDb
prop<span class="token punctuation">.</span><span class="token property-access">userName</span><span class="token operator">=</span>root
prop<span class="token punctuation">.</span><span class="token property-access">password</span><span class="token operator">=</span>root
</pre><p>&#x5F15;&#x5165;context&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x8BE5;&#x5C5E;&#x6027;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span>
<span class="token attr-name">xxxxx...xxx</span>
<span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxxxxxx...xxxx http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span> 
<span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driveClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prop.driverClass}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prop.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prop.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prop.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><h2 class="mume-header" id="%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA">&#x57FA;&#x4E8E;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x8C61;&#x521B;&#x5EFA;</h2>

<p>&#x6CE8;&#x89E3;&#x65F6;&#x4EE3;&#x7801;&#x91CC;&#x7279;&#x6B8A;&#x7684;&#x6807;&#x8BB0;&#xFF0C;&#x683C;&#x5F0F;&#xFF1A;<code>@&#x6CE8;&#x89E3;&#x540D;&#x79F0;(&#x5C5E;&#x6027;&#x540D;&#x79F0;=&#x5C5E;&#x6027;&#x503C;[,&#x5C5E;&#x6027;&#x540D;&#x79F0;=&#x5C5E;&#x6027;&#x503C;])</code>&#x3002;</p>
<p>&#x6CE8;&#x89E3;&#x53EF;&#x4EE5;&#x7528;&#x5728;&#x7C7B;&#x3001;&#x65B9;&#x6CD5;&#x3001;&#x5C5E;&#x6027;&#x3002;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x6784;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x7B80;&#x5316;xml&#x914D;&#x7F6E;&#x3002;</p>
<h3 class="mume-header" id="bean%E7%AE%A1%E7%90%86-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%8F%90%E4%BE%9B%E6%B3%A8%E8%A7%A3">Bean&#x7BA1;&#x7406; - &#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x6CE8;&#x89E3;</h3>

<p>(1) @Component      &#x666E;&#x901A;&#x7684;&#x7EC4;&#x4EF6;<br>
(2) @Service        &#x4E00;&#x822C;&#x7528;&#x5728;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5C42;<br>
(3) @Controller     &#x4E00;&#x822C;&#x7528;&#x5728;Web&#x5C42;<br>
(4) @Repository     &#x7528;&#x5728;DAO&#x66FE;&#x548C;Mapper&#x5C42;<br>
&#x4E0A;&#x9762;&#x7684;&#x56DB;&#x4E2A;&#x6CE8;&#x89E3;&#x7684;&#x529F;&#x80FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x90FD;&#x662F;&#x7528;&#x6765;&#x521B;&#x5EFA;Bean&#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x6B65;&#x9AA4;&#xFF1A;<br>
&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5F15;&#x5165;&#x4F9D;&#x8D56; spring-aop.jar<br>
&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x5F00;&#x542F;&#x7EC4;&#x4EF6;&#x626B;&#x63CF;&#x3002;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x5165;&#x4E00;&#x4E2A;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>xmlns:context=&quot;http://www.springframework.org/schema/context&quot;

xsi:schemaLocation=&quot;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;
</code></pre><p>&#x5F00;&#x542F;&#x7EC4;&#x4EF6;&#x626B;&#x63CF;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.util,com.xxx.service<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- &#x53E6;&#x4E00;&#x4E2A;&#x5199;&#x6CD5;&#xFF0C;&#x53EA;&#x5199;&#x4E0A;&#x5C42;&#x76EE;&#x5F55;&#xFF0C;&#x8BE5;&#x76EE;&#x5F55;&#x4E0B;&#x5168;&#x90E8;&#x626B;&#x63CF; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#x7B2C;&#x4E09;&#x6B65; &#x521B;&#x5EFA;&#x7C7B;&#xFF0C;&#x5728;&#x7C7B;&#x4E0A;&#x6DFB;&#x52A0;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x6CE8;&#x89E3;:</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-import">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// &lt;bean id=&quot;userService&quot; class=&quot;xxx&quot;&gt;</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Service add...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x6CE8;&#x89E3;&#x4E2D;&#x7684;&#x5C5E;&#x6027;value&#x53EF;&#x4EE5;&#x4E0D;&#x5199;&#xFF0C;&#x9ED8;&#x8BA4;&#x540D;&#x79F0;&#x662F;&#x7C7B;&#x7684;&#x540D;&#x79F0;&#x5E76;&#x4E14;&#x9996;&#x5B57;&#x6BCD;&#x5C0F;&#x5199;&#x3002;</p>
<p>&#x6D4B;&#x8BD5;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;bean1.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserService</span> service <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        service<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%E5%BC%80%E5%90%AF%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E7%9A%84%E9%85%8D%E7%BD%AE">&#x5F00;&#x542F;&#x7EC4;&#x4EF6;&#x626B;&#x63CF;&#x7684;&#x914D;&#x7F6E;</h3>

<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu<span class="token punctuation">&quot;</span></span> <span class="token attr-name">use-defaulter-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--use-default-filters=&quot;false&quot;, &#x73B0;&#x5728;&#x81EA;&#x5DF1;&#x914D;&#x7F6E;filter--&gt;</span>
<span class="token comment">&lt;!--&#x53EA;&#x626B;&#x63CF;&#x5E26;&#x6709;Controller&#x6CE8;&#x89E3;&#x7684;&#x7C7B;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>include-filter</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>annotation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.stereotype.Controller<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--&#x8BBE;&#x7F6E;&#x4E0D;&#x626B;&#x63CF;&#x7684;&#x7C7B;&#xFF0C;&#x542B;&#x6709;Controller&#x7684;&#x6CE8;&#x89E3;&#x7684;&#x7C7B;&#x4E0D;&#x626B;&#x63CF;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>exclude-filter</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>annotation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.stereotype.Controller<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>
</pre><h3 class="mume-header" id="%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E7%9A%84%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5">&#x57FA;&#x4E8E;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x7684;&#x5C5E;&#x6027;&#x6CE8;&#x5165;</h3>

<p>@AutoWired: &#x6839;&#x636E;&#x5C5E;&#x6027;&#x7C7B;&#x578B;&#x81EA;&#x52A8;&#x88C5;&#x914D;</p>
<p>@Qualifier: &#x6839;&#x636E;&#x5C5E;&#x6027;&#x540D;&#x79F0;&#x8FDB;&#x884C;&#x6CE8;&#x5165;</p>
<p>@Resource: &#x6839;&#x636E;&#x7C7B;&#x578B;&#x6CE8;&#x5165;&#x6216;&#x8005;&#x6839;&#x636E;&#x540D;&#x79F0;&#x6CE8;&#x5165;</p>
<p>@Value: &#x6CE8;&#x5165;&#x666E;&#x901A;&#x7C7B;&#x578B;&#x5C5E;&#x6027;</p>
<p>&#x4F8B;&#x5B50;&#xFF1A;&#x5BF9;Service&#x91CC;&#x6DFB;&#x52A0;&#x5C5E;&#x6027;Dao&#x3002;&#x4E0D;&#x9700;&#x8981;&#x6DFB;&#x52A0;setters&#x65B9;&#x6CD5;&#x5C31;&#x53EF;&#x4EE5;&#x6CE8;&#x5165;&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    xxxxxx
<span class="token punctuation">}</span>

<span class="token comment">// &#x6CE8;&#x89E3;&#x751F;&#x6210;&#x5BF9;&#x8C61;userService</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@AutoWired</span>  <span class="token comment">// &#x6839;&#x636E;&#x7C7B;&#x578B;&#x5C06;&#x751F;&#x6210;&#x7684;userDao&#x6CE8;&#x5165;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;service add...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>@Qualifier &#x548C; @Autowired&#x4E00;&#x8D77;&#x4F7F;&#x7528;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;userDaoImpl&quot;</span><span class="token punctuation">)</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x6CE8;&#x89E3;&#x751F;&#x6210;&#x5BF9;&#x8C61;userService</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@AutoWired</span>  <span class="token comment">// &#x6839;&#x636E;&#x7C7B;&#x578B;&#x5C06;&#x751F;&#x6210;&#x7684;userDao&#x6CE8;&#x5165;</span>
    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;userDaoImpl&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;service add...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>@Resource &#x6548;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;userDaoImpl&quot;</span><span class="token punctuation">)</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x6CE8;&#x89E3;&#x751F;&#x6210;&#x5BF9;&#x8C61;userService</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;userDapImpl&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;service add...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>@Resource &#x4E0D;&#x7ED9;&#x503C;&#x5219;&#x6839;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x5982;&#x679C;&#x7ED9;&#x51FA;name&#x5C5E;&#x6027;&#x5219;&#x6839;&#x636E;&#x540D;&#x79F0;&#x6CE8;&#x5165;&#x3002;</p>
<p>@Value&#x6CE8;&#x5165;&#x666E;&#x901A;&#x7C7B;&#x578B;&#x5C5E;&#x6027;&#xFF0C;&#x4E0D;&#x9700;&#x8981;setters&#x65B9;&#x6CD5;&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserService</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%E7%BA%AF%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%AE%8C%E5%85%A8%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E8%80%8C%E4%B8%8D%E6%98%AF%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">&#x7EAF;&#x6CE8;&#x89E3;&#x5F00;&#x53D1;&#xFF0C;&#x5B8C;&#x5168;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x800C;&#x4E0D;&#x662F;&#x7528;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3>

<p>(1) &#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x7C7B;&#xFF0C;&#x66FF;&#x4EE3;xml&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token comment">// &#x7528;&#x8FD9;&#x4E2A;&#x6CE8;&#x89E3;&#x6765;&#x66FF;&#x4EE3;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;com.atguign&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">SpringConfig</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</pre><p>(2) &#x6CE8;&#x89E3;&#x521B;&#x5EFA;&#x7C7B;&#x3001;&#x6CE8;&#x5165;&#x5C5E;&#x6027;</p>
<p>(3) &#x4F7F;&#x7528;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4F7F;&#x7528;Spring Boot&#x6765;&#x5B9E;&#x73B0;&#x5B8C;&#x5168;&#x6CE8;&#x89E3;&#x5F00;&#x53D1;&#x3002;</p>
<h1 class="mume-header" id="aop-%E5%9F%BA%E6%9C%AC">AOP &#x57FA;&#x672C;</h1>

<h2 class="mume-header" id="aop-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">AOP &#x57FA;&#x672C;&#x6982;&#x5FF5;</h2>

<p>AOP&#x79F0;&#x4E3A;&#x9762;&#x5411;&#x5207;&#x9762;&#x7F16;&#x7A0B;&#xFF0C;&#x901A;&#x8FC7;&#x9884;&#x7F16;&#x8BD1;&#x65B9;&#x5F0F;&#x548C;&#x8FD0;&#x884C;&#x671F;&#x95F4;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x5B9E;&#x73B0;&#x7A0B;&#x5E8F;&#x529F;&#x80FD;&#x7684;&#x7EDF;&#x4E00;&#x7EF4;&#x62A4;&#x7684;&#x4E00;&#x79CD;&#x6280;&#x672F;&#x3002;&#x5229;&#x7528;AOP&#x53EF;&#x4EE5;&#x5BF9;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x5404;&#x4E2A;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x9694;&#x79BB;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5F97;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5404;&#x4E2A;&#x90E8;&#x5206;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5EA6;&#x964D;&#x4F4E;&#xFF0C;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x7684;&#x53EF;&#x91CD;&#x7528;&#x6027;&#xFF0C;&#x540C;&#x65F6;&#x63D0;&#x9AD8;&#x4E86;&#x5F00;&#x53D1;&#x7684;&#x6548;&#x7387;&#x3002;</p>
<blockquote>
<p>&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x901A;&#x8FC7;&#x4FEE;&#x6539;&#x6E90;&#x4EE3;&#x7801;&#x65B9;&#x5F0F;&#xFF0C;&#x5728;&#x4E3B;&#x5E72;&#x529F;&#x80FD;&#x91CC;&#x9762;&#x6DFB;&#x52A0;&#x65B0;&#x529F;&#x80FD;&#x3002;</p>
</blockquote>
<h2 class="mume-header" id="aop-%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86">AOP &#x5E95;&#x5C42;&#x539F;&#x7406;</h2>

<h3 class="mume-header" id="1-aop-%E5%BA%95%E5%B1%82%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">1. AOP &#x5E95;&#x5C42;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x4EE3;&#x7406;</h3>

<p>(1) &#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;<br>
&#x7B2C;&#x4E00;&#x79CD; &#x6709;&#x63A5;&#x53E3;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4F7F;&#x7528;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;<br>
&#x7B2C;&#x4E8C;&#x79CD; &#x6CA1;&#x6709;&#x63A5;&#x53E3;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4F7F;&#x7528;CGLIB&#x52A8;&#x6001;&#x4EE3;&#x7406;</p>
<p><strong>&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x6709;&#x63A5;&#x53E3;&#x60C5;&#x51B5;</strong>&#xFF1A;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-interface">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">UserDao</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// &#x767B;&#x5F55;&#x7684;&#x5B9E;&#x73B0;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x5728;&#x767B;&#x5F55;&#x65F6;&#x8FDB;&#x884C;&#x589E;&#x5F3A;</span>
<span class="token comment">// &#x521B;&#x5EFA;UserDao&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7C7B;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x901A;&#x8FC7;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x589E;&#x5F3A;&#x529F;&#x80FD;</span>
</pre><p><strong>&#x6CA1;&#x6709;&#x63A5;&#x53E3;&#x60C5;&#x51B5;</strong><br>
CGLIB&#x52A8;&#x6001;&#x4EE3;&#x7406;&#xFF1A;</p>
<ol>
<li>&#x521B;&#x5EFA;&#x5F53;&#x524D;&#x7C7B;<strong>&#x5B50;&#x7C7B;</strong>&#x7684;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</li>
</ol>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword keyword-super">super</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="aop-%E7%9A%84jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E4%BE%8B%E5%AD%90">AOP &#x7684;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x4F8B;&#x5B50;</h3>

<p>java.lang.Proxy &#x7C7B;&#x80FD;&#x591F;&#x63D0;&#x4F9B;&#x521B;&#x5EFA;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x8BE5;&#x7C7B;&#x6709;&#x4E00;&#x4E2A;static&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> loader<span class="token punctuation">,</span> <span class="token keyword keyword-class">class</span>\<span class="token operator">&lt;</span><span class="token operator">?</span>\<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces<span class="token punctuation">,</span> <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span>
</pre><p>&#x6765;&#x521B;&#x5EFA;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x65B9;&#x6CD5;&#x91CC;&#x6709;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x3001;&#x589E;&#x5F3A;&#x65B9;&#x6CD5;&#x6240;&#x5728;&#x7684;&#x7C7B;&#xFF0C;&#x6240;&#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x652F;&#x6301;&#x591A;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;InvocationHandler &#x5199;&#x589E;&#x5F3A;&#x7684;&#x903B;&#x8F91;(&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#x6216;&#x8005;&#x5355;&#x72EC;&#x5199;&#x4E00;&#x4E2A;&#x7C7B;)&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-interface">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-int">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">UserDao</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-int">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-import">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span><span class="token punctuation">;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">UserDaoProxy</span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Object</span> obj<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">UserDaoProxy</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x6BCF;&#x6B21;&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x90FD;&#x8C03;&#x7528;invoke</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> <span class="token class-name">Proxy</span><span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword keyword-throws">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x5199;&#x589E;&#x5F3A;&#x903B;&#x8F91;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Process before method, name: &quot;</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;param: &quot;</span><span class="token operator">+</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Object</span> res <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Process after method&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// &#x521B;&#x5EFA;&#x4EE3;&#x7406;&#x5B9E;&#x73B0;&#x7C7B;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">UserDao</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">UserDao</span> ud <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">UserDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ud <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">)</span><span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">Main</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> interfaces<span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">UserDaoProxy</span><span class="token punctuation">(</span>ud<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ud<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="aop-%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD">AOP &#x76F8;&#x5173;&#x672F;&#x8BED;</h2>

<ol>
<li><strong>&#x8FDE;&#x63A5;&#x70B9;</strong>&#xFF1A;&#x4E00;&#x4E2A;User&#x7C7B;&#x4E2D;&#x54EA;&#x4E9B;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x88AB;&#x589E;&#x5F3A;&#xFF0C;&#x90A3;&#x4E48;&#x54EA;&#x4E9B;&#x65B9;&#x6CD5;&#x5C31;&#x79F0;&#x4E3A;&#x8FDE;&#x63A5;&#x70B9;&#x3002;</li>
<li><strong>&#x5207;&#x5165;&#x70B9;</strong>&#xFF1A;&#x5B9E;&#x9645;&#x88AB;&#x771F;&#x6B63;&#x589E;&#x5F3A;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x79F0;&#x4E3A;&#x5207;&#x5165;&#x70B9;&#x3002;</li>
<li><strong>&#x901A;&#x77E5;/&#x589E;&#x5F3A;</strong>&#xFF1A;&#x5B9E;&#x9645;&#x88AB;&#x589E;&#x5F3A;&#x7684;&#x903B;&#x8F91;&#x90E8;&#x5206;&#x79F0;&#x4E3A;&#x901A;&#x77E5;/&#x589E;&#x5F3A;&#x3002;&#xFF08;&#x4F8B;&#x5982;&#x767B;&#x5F55;&#x754C;&#x9762;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x6743;&#x9650;&#x5224;&#x65AD;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x6743;&#x9650;&#x5224;&#x65AD;&#x5C31;&#x79F0;&#x4E3A;&#x589E;&#x5F3A;/&#x901A;&#x77E5;&#xFF09;&#x3002;&#x901A;&#x77E5;&#x6709;&#x591A;&#x79CD;&#x7C7B;&#x578B;&#x3002;<br>
&#x524D;&#x7F6E;&#x901A;&#x77E5;&#xFF1A;add()&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#x6267;&#x884C;<br>
&#x540E;&#x7F6E;&#x901A;&#x77E5;&#xFF1A;add()&#x65B9;&#x6CD5;&#x4E4B;&#x540E;&#x6267;&#x884C;<br>
&#x73AF;&#x7ED5;&#x901A;&#x77E5;&#xFF1A;add()&#x65B9;&#x6CD5;&#x524D;&#x540E;&#x90FD;&#x6267;&#x884C;<br>
&#x5F02;&#x5E38;&#x901A;&#x77E5;&#xFF1A;add()&#x65B9;&#x6CD5;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x540E;&#x6267;&#x884C;<br>
&#x6700;&#x7EC8;&#x901A;&#x77E5;&#xFF1A;try-catch-finally&#x4E2D;&#x7684;finally&#xFF0C;&#x4E0D;&#x7BA1;&#x600E;&#x6837;&#xFF0C;&#x8C03;&#x7528;&#x540E;&#x90FD;&#x4F1A;&#x6267;&#x884C;&#x3002;</li>
<li><strong>&#x5207;&#x9762;</strong>&#xFF1A;&#x662F;&#x4E00;&#x4E2A;&#x52A8;&#x4F5C;&#xFF0C;&#x628A;&#x901A;&#x77E5;&#x5E94;&#x7528;&#x5230;&#x5207;&#x5165;&#x70B9;&#x7684;&#x8FC7;&#x7A0B;&#x5C31;&#x79F0;&#x4E3A;&#x5207;&#x9762;&#x3002;</li>
</ol>
<h2 class="mume-header" id="aop-%E6%93%8D%E4%BD%9C%E5%87%86%E5%A4%87">AOP &#x64CD;&#x4F5C;&#xFF08;&#x51C6;&#x5907;&#xFF09;</h2>

<p>&#x5728;Spring&#x6846;&#x67B6;&#x4E2D;&#xFF0C;&#x4E00;&#x822C;&#x57FA;&#x4E8E;AspectJ &#x5B9E;&#x73B0;AOP&#x64CD;&#x4F5C;&#x3002;<br>
(1) &#x4EC0;&#x4E48;&#x662F;AspectJ<br>
AspectJ&#x4E0D;&#x662F;Spring&#x7EC4;&#x6210;&#x90E8;&#x5206;&#xFF0C;&#x662F;&#x72EC;&#x7ACB;&#x7684;AOP&#x6846;&#x67B6;&#x3002;&#x4E00;&#x822C;&#x628A;AspectJ&#x548C;Spring&#x6846;&#x67B6;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x8FDB;&#x884C;AOP&#x64CD;&#x4F5C;&#x3002;</p>
<p>(2) &#x57FA;&#x4E8E;AspectJ&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;<br>
xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3001;&#x6CE8;&#x89E3;&#x5B9E;&#x73B0;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x3002;</p>
<p>(3) &#x5F15;&#x5165;AOP&#x76F8;&#x5173;&#x4F9D;&#x8D56;spring-aop.jar&#x3001;spring-aspects.jar&#x3001;com.springsource.net.sf.cglib.jar, com.springsource.org.aopalliance.jar&#x3001;com.springsource.org.aspectj.weaver.jar</p>
<p>(4) &#x5207;&#x5165;&#x70B9;&#x8868;&#x8FBE;&#x5F0F;<br>
&#x4F5C;&#x7528;&#xFF1A;&#x77E5;&#x9053;&#x5BF9;&#x54EA;&#x4E2A;&#x7C7B;&#x91CC;&#x9762;&#x7684;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x589E;&#x5F3A;<br>
&#x8BED;&#x6CD5;&#x7ED3;&#x6784;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="txt" class="language-txt">execution([&#x6743;&#x9650;&#x4FEE;&#x9970;&#x7B26;][&#x8FD4;&#x56DE;&#x7C7B;&#x578B;][&#x7C7B;&#x7684;&#x5168;&#x8DEF;&#x5F84;][&#x65B9;&#x6CD5;&#x540D;&#x79F0;]([&#x53C2;&#x6570;&#x5217;&#x8868;]))
</pre><p>&#x4E3E;&#x4F8B;1: &#x5BF9;com.atguigu.dao.BookDao&#x7C7B;&#x91CC;&#x9762;&#x7684;add&#x8FDB;&#x884C;&#x589E;&#x5F3A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>*: public/private &#x90FD;&#x53EF;&#x4EE5;
&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x53EF;&#x4E0D;&#x5199;
..: &#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x53C2;&#x6570;
execution(* com.atguigu.dao.BookDao.add(..))

// &#x5BF9;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x589E;&#x5F3A;
execution(* com.atguigu.dao.BookDao.*(..))

// &#x5BF9;&#x5305;&#x91CC;&#x7684;&#x6240;&#x6709;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x589E;&#x5F3A;
execution(* com.atguigu.dao.*.*(..))
</code></pre><h2 class="mume-header" id="aop-%E6%93%8D%E4%BD%9C%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F">AOP &#x64CD;&#x4F5C;&#xFF08;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#xFF09;</h2>

<ol>
<li>&#x521B;&#x5EFA;&#x88AB;&#x589E;&#x5F3A;&#x7C7B;&#xFF0C;&#x5728;&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x521B;&#x5EFA;&#x589E;&#x5F3A;&#x7C7B;&#xFF08;&#x7F16;&#x5199;&#x589E;&#x5F3A;&#x7684;&#x903B;&#x8F91;&#xFF09;&#xFF0C;&#x5728;&#x589E;&#x5F3A;&#x7C7B;&#x4E2D;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x4EE3;&#x8868;&#x4E0D;&#x540C;&#x901A;&#x77E5;&#x7C7B;&#x578B;&#x3002;</li>
<li>&#x8FDB;&#x884C;&#x901A;&#x77E5;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5728;spring&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5F00;&#x542F;&#x6CE8;&#x89E3;&#x626B;&#x63CF;&#xFF0C;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x521B;&#x5EFA;User&#x548C;UserProxy&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x589E;&#x5F3A;&#x7684;&#x7C7B;&#x4E0A;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;@Aspect&#xFF0C;&#x5728;spring&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5F00;&#x542F;&#x751F;&#x6210;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x5728;&#x589E;&#x5F3A;&#x7C7B;&#x4E0A;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;@Aspect</li>
<li>&#x914D;&#x7F6E;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x901A;&#x77E5;&#xFF0C;&#x5728;&#x589E;&#x5F3A;&#x7C7B;&#x91CC;&#xFF0C;&#x5728;&#x9700;&#x8981;&#x589E;&#x5F3A;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x6DFB;&#x52A0;&#x589E;&#x5F3A;&#x7C7B;&#x578B;&#x7684;&#x6CE8;&#x89E3;&#xFF0C; &#x4F7F;&#x7528;&#x5207;&#x5165;&#x70B9;&#x8868;&#x8FBE;&#x5F0F;</li>
</ol>
<p>bena.xml&#x91CC;&#x9700;&#x8981;&#x5F15;&#x5165;aop&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd 
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd 
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ttest<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- &#x5F00;&#x542F;Aspect&#x751F;&#x6210;&#x4EE3;&#x7406;&#x5BF9;&#x8C61; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect-autoproxy</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect-autoproxy</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#x4E0A;&#x9762;&#x7684;xml&#x4E2D;&#x7684;aspcet-autoproxy&#x7528;&#x6CE8;&#x89E3;&#x53EF;&#x4EE5;&#x66FF;&#x4EE3;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@EnableAspectJAutoProxy</span><span class="token punctuation">(</span>proxyTargetClass<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token comment">// &#x6216;&#x8005;</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span>
</pre><p>&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token comment">// &#x88AB;&#x589E;&#x5F3A;&#x7C7B;</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;add...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x589E;&#x5F3A;&#x7C7B;</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Aspect</span>         <span class="token comment">// &#x751F;&#x6210;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserProxy</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x914D;&#x7F6E;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;execution(* ttest.User.add(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x6D4B;&#x8BD5;&#xFF1A;</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Main</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;bean.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x8F93;&#x51FA;&#xFF1A;</span>
<span class="token comment">// before...</span>
<span class="token comment">// add...</span>
</pre><p>&#x5176;&#x4ED6;&#x7684;&#x7C7B;&#x578B;&#x8FD8;&#x6709;<br>
@After: &#x5728;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x4E4B;&#x540E;&#x6267;&#x884C;&#xFF08;&#x6700;&#x7EC8;&#x901A;&#x77E5;&#xFF09;<br>
@AfterReturning: &#x5728;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4E4B;&#x540E;&#x6267;&#x884C;&#xFF08;&#x540E;&#x7F6E;&#x901A;&#x77E5;&#xFF09;<br>
@AfterThrowing: &#x5F02;&#x5E38;&#x540E;&#x6267;&#x884C;<br>
@Around: &#x73AF;&#x7ED5;&#x901A;&#x77E5;<br>
...</p>
<h3 class="mume-header" id="%E7%9B%B8%E5%90%8C%E7%9A%84%E5%88%87%E5%85%A5%E7%82%B9%E6%8A%BD%E5%8F%96">&#x76F8;&#x540C;&#x7684;&#x5207;&#x5165;&#x70B9;&#x62BD;&#x53D6;</h3>

<p>&#x5B9A;&#x4E49;&#x5207;&#x5165;&#x70B9;&#xFF1A;&#x5BF9;&#x4E00;&#x4E2A;&#x7A7A;&#x65B9;&#x6CD5;&#x4E0A;&#x6DFB;&#x52A0;@Pointcut&#x6807;&#x8BB0;<br>
&#x4F7F;&#x7528;&#x5207;&#x5165;&#x70B9;&#xFF1A;@Before(value=&quot;pointdemo()&quot;)&#xFF0C;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x540D;&#x79F0;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserProxy</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;execution(xxx)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">pointdemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;pointdemo()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%E5%A4%9A%E4%B8%AA%E5%A2%9E%E5%BC%BA%E7%B1%BB%E5%AF%B9%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%BC%BA%E8%AE%BE%E7%BD%AE%E5%A2%9E%E5%BC%BA%E7%B1%BB%E4%BC%98%E5%85%88%E7%BA%A7">&#x591A;&#x4E2A;&#x589E;&#x5F3A;&#x7C7B;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x589E;&#x5F3A;&#xFF0C;&#x8BBE;&#x7F6E;&#x589E;&#x5F3A;&#x7C7B;&#x4F18;&#x5148;&#x7EA7;</h3>

<p>&#x5728;&#x589E;&#x5F3A;&#x7C7B;&#x4E0A;&#x9762;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x6CE8;&#x89E3;@Order(&#x6570;&#x5B57;)&#xFF0C;&#x6570;&#x5B57;&#x8D8A;&#x5C0F;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;&#xFF0C;&#x4ECE;0&#x5F00;&#x59CB;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">PersonProxy</span> <span class="token punctuation">{</span>

    <span class="token comment">// &#x540E;&#x7F6E;&#x901A;&#x77E5;</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;execution(* ttest.User.add(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">addEnhance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserProxy</span> <span class="token punctuation">{</span>

    <span class="token comment">// &#x540E;&#x7F6E;&#x901A;&#x77E5;</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;execution(* ttest.User.add(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">addEnhance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="aop-%E6%93%8D%E4%BD%9Caspectj-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C">AOP &#x64CD;&#x4F5C;&#xFF08;AspectJ &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#xFF09;</h2>

<p>&#x5B9E;&#x9645;&#x4E2D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;&#x7528;&#x7684;&#x5F88;&#x5C11;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x7528;&#x6CE8;&#x89E3;&#x505A;&#x5230;&#x3002;</p>
<ol>
<li>&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x7C7B;&#xFF0C;&#x88AB;&#x589E;&#x5F3A;&#x7C7B;&#x548C;&#x589E;&#x5F3A;&#x7C7B;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x65B9;&#x6CD5;&#x3002;</li>
<li>spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x7C7B;&#x5BF9;&#x8C61;</li>
<li>&#x5728;spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x5207;&#x5165;&#x70B9;</li>
</ol>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">buy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;buy.........&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">BookProxy</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">beforeEnhanced</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Syetem</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xxxxxxxxxx</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x7C7B;&#x7684;&#x5BF9;&#x8C61; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>book<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ttest.Book<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookProxy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ttest.BookProxy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- &#x914D;&#x7F6E;aop&#x589E;&#x5F3A; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &#x914D;&#x7F6E;&#x5207;&#x5165;&#x70B9; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* ttest.Book.buy(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>pointcut</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- &#x914D;&#x7F6E;&#x5207;&#x9762;&#xFF0C;&#x5E94;&#x7528;&#x5207;&#x5165;&#x70B9;&#x7684;&#x8FC7;&#x7A0B; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookProxy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--&#x589E;&#x5F3A;&#x4F5C;&#x7528;&#x5728;&#x5177;&#x4F53;&#x7684;&#x65B9;&#x6CD5;&#x4E0A; --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeEnhanced<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>before</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><h2 class="mume-header" id="%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">&#x5B8C;&#x5168;&#x6CE8;&#x89E3;&#x5F00;&#x53D1;</h2>

<p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;config&#x5305;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7528;xml&#x5F00;&#x53D1;&#x7C7B;&#x3002;<br>
@EnableAspectJAutoProxy(proxyTargetClass=true)</p>
<h1 class="mume-header" id="jdbctemplate">JdbcTemplate</h1>

<p>JdbcTemplate&#x5BF9;JDBC&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#xFF0C;&#x7528;&#x5B83;&#x6765;&#x5B9E;&#x73B0;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x3002;</p>
<h2 class="mume-header" id="%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">&#x51C6;&#x5907;&#x5DE5;&#x4F5C;</h2>

<ol>
<li>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</li>
</ol>
<ul>
<li>mysql-connector-java-5.1.7-bin.jar</li>
<li>druid-1.1.9.jar   &#xFF08;&#x5FB7;&#x9C81;&#x4F0A;&#x8FDE;&#x63A5;&#x6C60;&#xFF09;</li>
<li>spring-jdbc-5.2.6.RELEASE.jar</li>
<li>spring-tx-5.2.6.RELEASE.jar   &#xFF08;&#x4E8B;&#x52A1;&#x76F8;&#x5173;&#x4F9D;&#x8D56;&#xFF09;</li>
<li>spring-orm-5.2.6.RELEASE.jar</li>
</ul>
<ol start="2">
<li>&#x5728;spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x6C60;</li>
</ol>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://101.42.221.61:3306/TEST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><ol start="3">
<li>&#x914D;&#x7F6E;JDBCTemplate&#x5BF9;&#x8C61;&#xFF0C;&#x6CE8;&#x5165;DataSource</li>
</ol>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &#x6CE8;&#x5165;DataSource --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</pre><ol start="4">
<li>&#x521B;&#x5EFA;service&#x7C7B;&#xFF0C;&#x521B;&#x5EFA;dao&#x7C7B;&#xFF0C;&#x5728;dao&#x6CE8;&#x5165;jdbcTemplate&#x5BF9;&#x8C61;&#x3002;</li>
</ol>
<ul>
<li>Service<br>
&#x6CE8;&#x5165;BookDao&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;</li>
<li>Dao<br>
Dao&#x63A5;&#x53E3;</li>
<li>DaoImpl<br>
&#x6CE8;&#x5165;jdbcTemplate&#x5BF9;&#x8C61;</li>
</ul>
<h2 class="mume-header" id="jdbctemplate-%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5">JdbcTemplate &#x589E;&#x5220;&#x6539;&#x67E5;</h2>

<h3 class="mume-header" id="%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB">&#x521B;&#x5EFA;&#x5B9E;&#x4F53;&#x7C7B;</h3>

<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">String</span> userID<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">String</span> ustatus<span class="token punctuation">;</span>

    <span class="token comment">/* &#x751F;&#x6210; getter&#x3001;setter&#x65B9;&#x6CD5; */</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%E7%BC%96%E5%86%99service%E5%92%8Cdao">&#x7F16;&#x5199;Service&#x548C;dao</h3>

<p>&#x5728;Service&#x4E2D;&#x6DFB;&#x52A0;&#x63D0;&#x4F9B;&#x7ED9;&#x5916;&#x90E8;&#x7684;addUser&#x64CD;&#x4F5C;&#xFF0C;&#x5728;dao&#x63A5;&#x53E3;&#x4E2D;&#x6DFB;&#x52A0;addUser&#x63A5;&#x53E3;&#xFF0C;&#x5728;daoImpl&#x4E2D;&#x6DFB;&#x52A0;addUser&#x7684;SQL&#x6267;&#x884C;&#x903B;&#x8F91;&#x3002;&#xFF08;daoImpl&#x4E2D;&#x5DF2;&#x7ECF;&#x6709;jdbcTemplate&#x4E86;&#xFF09;</p>
<ul>
<li>jdbcTemplate.update(sql, Object ...)</li>
<li>jdbcTemplate.execute</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_user values(?,?,?)&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// &#x8F93;&#x51FA;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;</span>
    <span class="token keyword keyword-int">int</span> update_num <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getUstatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x6279;&#x91CF;&#x64CD;&#x4F5C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java">jdbcTemplate<span class="token punctuation">.</span><span class="token function">batchUpdate</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> batchArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h3 class="mume-header" id="%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C">&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;</h3>

<p><strong>jdbcTemplate &#x67E5;&#x8BE2;&#x8FD4;&#x56DE;&#x67D0;&#x4E2A;&#x503C;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-int">int</span> <span class="token function">selectCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select count(*) from t_book;&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Integer</span> count <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryFroObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token comment">/* &#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x7684;class */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p><strong>jdbcTemplate &#x67E5;&#x8BE2;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;</strong><br>
&#x4F7F;&#x7528;&#x5230;&#x7684;&#x51FD;&#x6570;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">JdbcTemplate</span><span class="token punctuation">.</span><span class="token function">queryObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> rowMapper<span class="token punctuation">,</span> <span class="token class-name">Object</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span>
</pre><p>RowMapper: &#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x4F7F;&#x7528;&#x4ED6;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x4F1A;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x5C01;&#x88C5;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token class-name">User</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_book where id=?&quot;</span><span class="token punctuation">;</span>
    jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%E6%9F%A5%E8%AF%A2%E9%9B%86%E5%90%88">&#x67E5;&#x8BE2;&#x96C6;&#x5408;</h3>

<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_user;&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> ulist <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> ulist<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E5%88%A0%E9%99%A4">&#x6279;&#x91CF;&#x4FEE;&#x6539;/&#x5220;&#x9664;</h3>

<pre data-role="codeBlock" data-info="java" class="language-java">jdbcTemplate<span class="token punctuation">.</span><span class="token function">batchUpdate</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> batchArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h2 class="mume-header" id="jdbc-%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C">JDBC &#x4E8B;&#x52A1;&#x64CD;&#x4F5C;</h2>

<h3 class="mume-header" id="%E4%B8%80%E4%B8%AA%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BE%8B%E5%AD%90">&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x7684;&#x4F8B;&#x5B50;</h3>

<p>A&#x5411;B&#x8F6C;&#x8D26;100&#x5757;&#xFF0C;A&#x8D26;&#x6237;&#x51CF;&#x5C11;100&#xFF0C;B&#x8D26;&#x6237;&#x589E;&#x52A0;100.</p>
<div class="mermaid">graph LR
web[WEB]
service[Service]
dao[Dao]


show(Show)
web --&gt; show(HTML&#x5C55;&#x793A;)
web &lt;--&gt; service
service &lt;--&gt; dao

transfer(&#x8F6C;&#x8D26;&#x64CD;&#x4F5C;)
service --&gt; transfer

lost[&#x51CF;&#x5C11;100]
get[&#x589E;&#x52A0;100]
dao --&gt; lost
dao --&gt; get
</div><p>&#x521B;&#x5EFA;Service&#xFF0C;&#x642D;&#x5EFA;dao&#xFF0C;&#x5B8C;&#x6210;&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#x548C;&#x6CE8;&#x5165;&#x5173;&#x7CFB;&#x3002;service&#x6CE8;&#x5165;dao&#xFF0C;&#x5728;dao&#x6CE8;&#x5165;jdbcTemplate&#xFF0C;&#x5728;jdbcTemplate&#x6CE8;&#x5165;DataSource&#x3002;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd 
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd 
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://101.42.221.61:3306/TEST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>-<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &#x6CE8;&#x5165;DataSource --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ttest.BookService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ttest.BookDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#x6CA1;&#x6709;&#x4E8B;&#x52A1;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token comment">// Dao&#x64CD;&#x4F5C;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_account set money=money-? and name=?&quot;</span><span class="token punctuation">;</span>
        jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;lucy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">reduceMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_account set money=money+? and name=?&quot;</span><span class="token punctuation">;</span>
        jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;mary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Service &#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5C42;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Service</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        dao<span class="token punctuation">.</span><span class="token function">reduceMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dao<span class="token punctuation">.</span><span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C">&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;</h3>

<div class="mermaid">graph LR
beg[&quot;&#x5F00;&#x542F;&#x4E8B;&#x52A1;&quot;]
process[&quot;&#x6267;&#x884C;&quot;]
exception{&quot;&#x5F02;&#x5E38;&quot;}
commit[&quot;&#x63D0;&#x4EA4;&quot;]
rollback[&quot;&#x56DE;&#x6EDA;&quot;]

beg --&gt; process
process --&gt; exception
exception --&gt; |&#x662F;| commit
exception --&gt; |&#x5426;| rollback
</div><ol>
<li>&#x4E8B;&#x52A1;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5230;Service&#x5C42;&#x4E0A;&#xFF08;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5C42;&#xFF09;</li>
<li>&#x5728;Spring&#x8FDB;&#x884C;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x64CD;&#x4F5C;&#xFF1A;&#x7F16;&#x7A0B;&#x5F0F;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x548C;&#x58F0;&#x660E;&#x5F0F;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#xFF08;&#x58F0;&#x660E;&#x5F0F;&#x6700;&#x5E38;&#x7528;&#xFF09;&#x3002;</li>
<li>&#x58F0;&#x660E;&#x5F0F;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x6709;&#x4E24;&#x79CD;&#xFF1A;&#x57FA;&#x4E8E;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x3001;&#x57FA;&#x4E8E;xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;</li>
<li>Spring &#x5728;&#x8FDB;&#x884C;&#x58F0;&#x660E;&#x5F0F;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x65F6;&#xFF0C;&#x5E95;&#x5C42;&#x4F7F;&#x7528;&#x4E86;AOP&#xFF0C;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x3002;</li>
</ol>
<h3 class="mume-header" id="spring-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86api">Spring &#x4E8B;&#x52A1;&#x7BA1;&#x7406;API</h3>

<p>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x4EE3;&#x8868;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x6846;&#x67B6;&#x63D0;&#x4F9B;&#x4E0D;&#x540C;&#x5B9E;&#x73B0;&#x7C7B;: <code>PlatfromTranscationManager</code>&#x3002;</p>
<p>&#x5B83;&#x9488;&#x5BF9;JDBCTemplate&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;: <code>DataSourceTranscationManager</code>&#xFF08;MyBatis&#x4E5F;&#x662F;&#x8FD9;&#x4E2A;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x9879;&#x76EE;&#x4E2D;&#x6574;&#x5408;&#x4E86;Hibernate&#xFF0C;&#x5219;&#x63D0;&#x4F9B;<code>HibernateTranscationManager</code>&#x3002;</p>
<h3 class="mume-header" id="%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86">&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF08;&#x6CE8;&#x89E3;&#x58F0;&#x660E;&#x5F0F;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#xFF09;</h3>

<p><strong>1. &#x5728;Spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;</strong><br>
<strong>2. &#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5F00;&#x542F;&#x4E8B;&#x52A1;&#x6CE8;&#x89E3;</strong><br>
&#x5F15;&#x5165;&#x540D;&#x79F0;&#x7A7A;&#x95F4;tx&#xFF0C;&#x4E0E;&#x524D;&#x9762;&#x65B9;&#x6CD5;&#x4E00;&#x81F4;&#xFF0C;&#x5728;xmlns:tx</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span>   <span class="token attr-name">xxx</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://101.42.221.61:3306/TEST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>-<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &#x6CE8;&#x5165;DataSource --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transcationManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTranscationManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &#x6CE8;&#x5165;&#x6570;&#x636E;&#x6E90; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transcation-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transcationManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><p><strong>3.&#x5728;Service&#x7C7B;&#x4E0A;&#x6216;&#x8005;service&#x7C7B;&#x91CC;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x9762;&#x6DFB;&#x52A0;&#x4E8B;&#x52A1;&#x6CE8;&#x89E3;</strong><br>
@Transcational&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5230;&#x7C7B;&#x6216;&#x65B9;&#x6CD5;&#x4E0A;&#xFF0C;&#x6DFB;&#x52A0;&#x5230;&#x7C7B;&#x4E0A;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x6DFB;&#x52A0;&#x5230;&#x4E86;&#x4E8B;&#x52A1;&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token annotation punctuation">@Service</span>                <span class="token comment">// &#x9ED8;&#x8BA4;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;userService&#x5BF9;&#x8C61;</span>
<span class="token annotation punctuation">@Transcational</span>          <span class="token comment">// &#x6DFB;&#x52A0;&#x4E8B;&#x52A1;&#x6CE8;&#x89E3;&#xFF0C;&#x53EF;&#x4EE5;&#x52A0;&#x5230;&#x7C7B;&#x6216;&#x65B9;&#x6CD5;&#x4E0A;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">reduceMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>         <span class="token comment">// &#x6A21;&#x62DF;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;</span>
        userDao<span class="token punctuation">.</span><span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x5982;&#x679C;&#x51FA;&#x73B0;&#x4E86;&#x9519;&#x8BEF;&#xFF0C;&#x5219;lucy&#x94B1;&#x4E0D;&#x4F1A;&#x5C11;&#xFF0C;mary&#x94B1;&#x4E0D;&#x4F1A;&#x591A;&#xFF0C;&#x5E76;&#x4E14;&#x6253;&#x5370;&#x51FA;&#x5F02;&#x5E38;&#x7A0B;&#x5E8F;&#x9000;&#x51FA;&#x3002;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>@Transcational(xxx)&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF1A;<br>
<strong>propagation</strong>: &#x591A;&#x4E8B;&#x52A1;&#x65B9;&#x6CD5;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E8B;&#x52A1;&#x662F;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x6709;&#x4E00;&#x4E2A;add&#x65B9;&#x6CD5;&#x548C;&#x4E00;&#x4E2A;update&#x65B9;&#x6CD5;&#x3002;&#x5728;add&#x548C;update&#x65B9;&#x6CD5;&#x4E2D;&#x90FD;&#x52A0;&#x4E86;Transcational&#xFF0C;&#x5E76;&#x4E14;&#x5728;add&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;update&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x884C;&#x4E3A;&#x600E;&#x4E48;&#x5904;&#x7406;&#x5C31;&#x662F;&#x4F20;&#x64AD;&#x65B9;&#x6CD5;&#x3002;<br>
<em>REQUIRE</em>: &#x5982;&#x679C;&#x6709;&#x4E8B;&#x52A1;&#x5728;&#x8FD0;&#x884C;&#xFF0C;&#x5F53;&#x524D;&#x65B9;&#x6CD5;&#x5C31;&#x5728;&#x8FD9;&#x4E2A;&#x4E8B;&#x52A1;&#x5185;&#x8FD0;&#x884C;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x4E8B;&#x52A1;&#xFF0C;&#x5E76;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x4E8B;&#x52A1;&#x5185;&#x8FD0;&#x884C;&#x3002;&#xFF08;update&#x4F7F;&#x7528;&#x5F53;&#x524D;add&#x65B9;&#x6CD5;&#x91CC;&#x9762;&#x7684;&#x4E8B;&#x52A1;&#xFF09;<br>
<em>REQUIRES_NEW</em>: &#x4F7F;&#x7528;add&#x65B9;&#x6CD5;&#x8C03;&#x7528;update&#xFF0C;&#x5982;&#x679C;add&#x65E0;&#x8BBA;&#x662F;&#x5426;&#x6709;&#x4E8B;&#x52A1;&#xFF0C;&#x90FD;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x4E8B;&#x52A1;&#xFF08;update&#x662F;&#x6709;&#x4E8B;&#x52A1;&#x7684;&#xFF09;<br>
<em>SUPPORTS</em>, <em>NOT_SUPPORT</em>, <em>MANDATORY</em>, <em>NEVER</em>, <em>NESTED</em>&#x7B49;&#x53EF;&#x4EE5;&#x53C2;&#x89C1;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x3002;</p>
<p><strong>isolation</strong>: &#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;<br>
(1) &#x591A;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x4F1A;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#xFF0C;&#x4EA7;&#x751F;&#x4E09;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x810F;&#x8BFB;&#x3001;&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#x3001;&#x5E7B;&#x8BFB;&#x3002;<br>
@ <em>&#x810F;&#x8BFB;</em>&#xFF1A;&#x4E00;&#x4E2A;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x4E8B;&#x52A1;&#x8BFB;&#x53D6;&#x5230;&#x53E6;&#x4E00;&#x4E2A;<strong>&#x672A;&#x63D0;&#x4EA4;</strong>&#x4E8B;&#x52A1;&#x7684;&#x6570;&#x636E;&#x3002;A&#x4E8B;&#x52A1;&#x8BFB;&#x53D6;B&#x4E8B;&#x52A1;&#x5C1A;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6B64;&#x65F6;&#x5982;&#x679C;B&#x4E8B;&#x52A1;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x5E76;&#x6267;&#x884C;&#x56DE;&#x6EDA;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;A&#x4E8B;&#x52A1;&#x8BFB;&#x53D6;&#x5230;&#x7684;&#x6570;&#x636E;&#x5C31;&#x662F;&#x810F;&#x6570;&#x636E;&#x3002;<br>
@ <em>&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;</em>&#xFF1A;&#x524D;&#x540E;&#x591A;&#x6B21;&#x8BFB;&#x53D6;&#xFF0C;&#x6570;&#x636E;&#x5185;&#x5BB9;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#xFF08;&#x9488;&#x5BF9;&#x7684;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x5DF2;&#x7ECF;&#x63D0;&#x4EA4;&#x7684;&#x4E8B;&#x52A1;&#x7684;update&#x7684;&#x64CD;&#x4F5C;&#xFF09;<br>
@ <em>&#x5E7B;&#x8BFB;</em>&#xFF1A;&#x524D;&#x540E;&#x591A;&#x6B21;&#x8BFB;&#x53D6;&#xFF0C;&#x6570;&#x636E;&#x603B;&#x91CF;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7B2C;&#x4E8C;&#x6B21;&#x64CD;&#x4F5C;&#x53D1;&#x73B0;&#x591A;&#x51FA;&#x4E86;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x9488;&#x5BF9;&#x53E6;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x7684;insert&#x548C;delete&#x64CD;&#x4F5C;&#x3002;<br>
@ &#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#x4E00;&#x822C;&#x4F7F;&#x7528;&#x884C;&#x9501;&#x89E3;&#x51B3;&#xFF0C;&#x5E7B;&#x8BFB;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x8868;&#x9501;&#x3002;</p>
<p><em>READ UNCOMMITTED</em>: &#x810F;&#x8BFB;&#x3001;&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#x3001;&#x5E7B;&#x8BFB;<br>
<em>READ COMMITTED</em>: &#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#x3001;&#x5E7B;&#x8BFB;<br>
<em>REPEATABLE READ</em>: &#x5E7B;&#x8BFB;<br>
<em>SERIALIZABLE</em>: &#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x95EE;&#x9898;<br>
<strong>MySQL&#x9ED8;&#x8BA4;REPEATABLE READ</strong>&#x3002;<br>
@Transcational(propagation=Propagation.REQUIRED, isolation=Isolation.REPEATABLE_READ)</p>
<p><strong>timeout</strong>: &#x8D85;&#x65F6;&#x65F6;&#x95F4;<br>
&#x4E8B;&#x52A1;&#x5728;&#x89C4;&#x5B9A;&#x65F6;&#x95F4;&#x5185;&#x63D0;&#x4EA4;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x63D0;&#x4EA4;&#x5219;&#x8FDB;&#x884C;&#x56DE;&#x6EDA;&#x3002;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x9ED8;&#x8BA4;&#x662F;-1&#xFF0C;&#x4EE5;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#xFF1A;timeout=100&#x3002;</p>
<p><strong>readOnly</strong>: &#x662F;&#x5426;&#x53EA;&#x8BFB;<br>
&#x9ED8;&#x8BA4;&#x503C;&#x662F;false&#xFF0C;&#x8868;&#x793A;&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#xFF0C;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4FEE;&#x6539;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x4E3A;true&#xFF0C;&#x5219;&#x53EA;&#x80FD;&#x8FDB;&#x884C;select&#x64CD;&#x4F5C;&#x3002;</p>
<p><strong>rollbackFor</strong>: &#x56DE;&#x6EDA;<br>
&#x8BBE;&#x7F6E;&#x54EA;&#x4E9B;&#x5F02;&#x5E38;&#x8FDB;&#x884C;&#x4E8B;&#x52A1;&#x56DE;&#x6EDA;&#x3002;</p>
<p><strong>noRollbackFor</strong>: &#x4E0D;&#x56DE;&#x6EDA;<br>
&#x8BBE;&#x7F6E;&#x51FA;&#x73B0;&#x54EA;&#x4E9B;&#x5F02;&#x5E38;&#x4E0D;&#x8FDB;&#x884C;&#x56DE;&#x6EDA;&#xFF0C;&#x8BBE;&#x7F6E;noRollbackFor=NullPointerException.class&#x5373;&#x53EF;&#x3002;</p>
<h2 class="mume-header" id="%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9Cxml-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86">&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF08;XML &#x58F0;&#x660E;&#x5F0F;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#xFF09;</h2>

<p>&#xFF08;1&#xFF09;&#x914D;&#x7F6E;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;<br>
&#xFF08;2&#xFF09;&#x914D;&#x7F6E;&#x901A;&#x77E5;<br>
&#xFF08;3&#xFF09;&#x914D;&#x7F6E;&#x5207;&#x5165;&#x70B9;&#x548C;&#x5207;&#x9762;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span>   <span class="token attr-name">xxx</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://101.42.221.61:3306/TEST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>-<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &#x6CE8;&#x5165;DataSource --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transcationManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTranscationManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &#x6CE8;&#x5165;&#x6570;&#x636E;&#x6E90; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- &#x914D;&#x7F6E;&#x901A;&#x77E5; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txadvice<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- &#x6307;&#x5B9A;&#x5728;&#x54EA;&#x79CD;&#x540D;&#x79F0;&#x7B26;&#x5408;&#x89C4;&#x5219;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x6DFB;&#x52A0;&#x4E8B;&#x52A1;--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>method</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&#x914D;&#x7F6E;&#x5207;&#x5165;&#x70B9;&#x548C;&#x5207;&#x9762;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &#x914D;&#x7F6E;&#x5207;&#x5165;&#x70B9; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(*  ttest.UserService.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--&#x914D;&#x7F6E;&#x5207;&#x9762;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txadvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</pre><h2 class="mume-header" id="%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C-%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">&#x4E8B;&#x52A1;&#x64CD;&#x4F5C; - &#x5B8C;&#x5168;&#x6CE8;&#x89E3;&#x5F00;&#x53D1;</h2>

<p>&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackage<span class="token operator">=</span><span class="token string">&quot;ttest&quot;</span><span class="token punctuation">)</span>     <span class="token comment">// &#x5F00;&#x542F;&#x7EC4;&#x5EFA;&#x626B;&#x63CF;</span>
<span class="token annotation punctuation">@EnableTranscationManagement</span>        <span class="token comment">// &#x5F00;&#x542F;&#x4E8B;&#x52A1;</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">TxConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x521B;&#x5EFA;&#x8FDE;&#x63A5;&#x6C60;</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">DruidDataSource</span> <span class="token function">getDruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DruidDataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://101.42.221.61:3306/TEST&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;wt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> dataSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x521B;&#x5EFA;JDBCTemplate&#x5BF9;&#x8C61;&#x3002;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x5219;&#x8BF4;&#x660E;&#x6839;&#x636E;&#x7C7B;&#x578B;&#x5728;Ioc&#x5BB9;&#x5668;&#x4E2D;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x5BF9;&#x8C61;&#x4F20;&#x5165;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x53C2;&#x6570;&#x4E3A;&#x7A7A;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x591A;&#x51FA;&#x4E00;&#x4E2A;&#x76F8;&#x540C;&#x5BF9;&#x8C61;&#x7684;&#x526F;&#x672C;</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">JdbcTemplate</span> <span class="token function">getJdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">HdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x6CE8;&#x5165;DataSource&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x53EF;&#x4EE5;getBean&#x83B7;&#x5F97;</span>
        jdbcTemplate<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> jdbcTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x521B;&#x5EFA;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;&#x5BF9;&#x8C61;</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">DataSourceTranscationManager</span> <span class="token function">getDataSourceTranscationManager</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">DataSourceTranscationManager</span> dstm <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">DataSourceTranscationManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dstm<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> dstm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">TxConfig</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h1 class="mume-header" id="spring-5-%E6%96%B0%E7%89%B9%E6%80%A7">Spring 5 -- &#x65B0;&#x7279;&#x6027;</h1>

<ol>
<li>&#x6574;&#x4E2A;&#x6846;&#x67B6;&#x57FA;&#x4E8E;Java8&#xFF0C;&#x517C;&#x5BB9;JDK9&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</li>
<li>Spring 5 &#x6846;&#x67B6;&#x81EA;&#x5E26;&#x4E86;&#x901A;&#x7528;&#x7684;&#x65E5;&#x5FD7;&#x5C01;&#x88C5;<br>
(1) Spring 5 &#x5DF2;&#x7ECF;&#x79FB;&#x9664;&#x4E86;Log4jConfigListener&#xFF0C;&#x5B98;&#x65B9;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;Log4j2&#x7248;&#x672C;&#x3002;</li>
</ol>
<h2 class="mume-header" id="%E6%95%B4%E5%90%88log4j%E6%97%A5%E5%BF%97">&#x6574;&#x5408;log4j&#x65E5;&#x5FD7;</h2>

<p>&#x7B2C;&#x4E00;&#x6B65;  &#x5F15;&#x5165;jar&#x5305;</p>
<ul>
<li>log4j-api-2.11.2.jar</li>
<li>log4j-core-2.11.2.jar</li>
<li>log4j-slf4j-impl-2.11.2.jar</li>
<li>slf4j-api-1.7.30.jar</li>
</ul>
<p>&#x7B2C;&#x4E8C;&#x6B65; &#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br>
&#x65B0;&#x5EFA;log4j2.xml(&#x540D;&#x5B57;&#x5FC5;&#x987B;&#x56FA;&#x5B9A;&#xFF0C;&#x4E0D;&#x80FD;&#x5199;&#x5176;&#x4ED6;&#x540D;&#x5B57;)&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;<br>
<img src="../images/20220415/2.png" alt></p>
<p>&#x7B2C;&#x4E09;&#x90E8;  &#x8FDB;&#x884C;&#x8F93;&#x51FA;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword keyword-import">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">UserLog</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">UserLog</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;hello log4j2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;hello log4j2&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="spring5%E6%96%B0%E7%89%B9%E6%80%A7-%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E6%94%AF%E6%8C%81nullable%E6%B3%A8%E8%A7%A3">Spring5&#x65B0;&#x7279;&#x6027; -- &#x6838;&#x5FC3;&#x5BB9;&#x5668;&#x652F;&#x6301;@Nullable&#x6CE8;&#x89E3;</h2>

<p>&#xFF08;1&#xFF09;@Nullable&#x6CE8;&#x89E3;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x65B9;&#x6CD5;&#x4E0A;&#x9762;&#x3001;&#x5C5E;&#x6027;&#x4E0A;&#x9762;&#x3001;&#x53C2;&#x6570;&#x4E0A;&#x9762;&#xFF0C;&#x8868;&#x793A;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;&#xFF0C;&#x5C5E;&#x6027;&#x503C;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;&#xFF0C;&#x53C2;&#x6570;&#x503C;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;&#x3002;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x4E0B;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x503C;&#x53EF;&#x4EE5;&#x4E3A;null</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="spring-5-%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E6%94%AF%E6%8C%81%E5%87%BD%E6%95%B0%E5%BC%8F%E6%93%8D%E4%BD%9C%E7%BC%96%E7%A8%8B%E5%AF%B9%E8%B1%A1">Spring 5 &#x6838;&#x5FC3;&#x5BB9;&#x5668;&#x652F;&#x6301;&#x51FD;&#x6570;&#x5F0F;&#x64CD;&#x4F5C;&#x7F16;&#x7A0B;&#x5BF9;&#x8C61;</h2>

<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x8C03;&#x7528;context&#x8FDB;&#x884C;&#x5BF9;&#x8C61;&#x6CE8;&#x518C;</span>
        context<span class="token punctuation">.</span>re <span class="token function">fresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x5C06;new&#x51FA;&#x6765;&#x7684;&#x5BF9;&#x8C61;&#x5728;spring&#x7684;&#x5BB9;&#x5668;&#x4E2D;&#x6CE8;&#x518C;</span>
        context<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x83B7;&#x53D6;&#x65B9;&#x5F0F;&#x662F;&#x5168;&#x8DEF;&#x5F84;&#xFF0C;&#x56E0;&#x4E3A;&#x4F20;&#x5165;&#x7684;&#x662F;User.class</span>
        context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;com.ttest.User&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="%E5%AF%B9junit5%E6%B5%8B%E8%AF%95%E8%BF%9B%E8%A1%8C%E6%95%B4%E5%90%88">&#x5BF9;JUnit5&#x6D4B;&#x8BD5;&#x8FDB;&#x884C;&#x6574;&#x5408;</h2>

<h3 class="mume-header" id="%E6%95%B4%E5%90%88junit4">&#x6574;&#x5408;JUnit4</h3>

<p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x52A0;&#x5165;&#x4F9D;&#x8D56;jar&#x5305;</p>
<ul>
<li>spring-test-5.26.jar</li>
<li>junit4-4.12.jar</li>
<li>hamcrest-core-1.3.jar</li>
</ul>
<p>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7C7B;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span>     <span class="token comment">// &#x6307;&#x5B9A;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:bean1.xml&quot;</span><span class="token punctuation">)</span>    <span class="token comment">// &#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">JTest4</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>      <span class="token comment">// &#x81EA;&#x52A8;&#x6CE8;&#x5165;&#x4E1A;&#x52A1;&#x5C42;&#x7684;Service</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        userService<span class="token punctuation">.</span><span class="token function">accountMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%E6%95%B4%E5%90%88junit5">&#x6574;&#x5408;JUnit5</h3>

<p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5F15;&#x5165;jar&#x5305;&#xFF0C;5.3<br>
&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7C7B;&#xFF0C;&#x4F7F;&#x7528;JUnit5&#x4E2D;&#x7684;&#x6CE8;&#x89E3;</p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span><span class="token class-name">SpringExtension</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:bean1.xml&quot;</span><span class="token punctuation">)</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">JTest5</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>      <span class="token comment">// &#x81EA;&#x52A8;&#x6CE8;&#x5165;&#x4E1A;&#x52A1;&#x5C42;&#x7684;Service</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>           <span class="token comment">// Junit5 &#x7684;@Test</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        userService<span class="token punctuation">.</span><span class="token function">accountMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x4E0A;&#x9762;&#x7684;ExtendWith&#x6CE8;&#x89E3;&#x548C;ContextConfiguration&#x6CE8;&#x89E3;&#x53EF;&#x4EE5;&#x5408;&#x5E76;</span>
<span class="token annotation punctuation">@SpringJUnitConfig</span><span class="token punctuation">(</span>locations<span class="token operator">=</span><span class="token string">&quot;classpath:bean1.xml&quot;</span><span class="token punctuation">)</span>
</pre><h1 class="mume-header" id="springmvc">SpringMVC</h1>

<p>MVC: &#x6A21;&#x578B;Model&#xFF08;Dao&#x5C42;&#xFF0C;Service&#x5C42;&#xFF09;&#xFF0C;&#x89C6;&#x56FE;View&#xFF08;JSP/html&#xFF09;&#xFF0C;&#x63A7;&#x5236;&#x5668;Controller&#xFF08;Servlet&#xFF0C;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x548C;&#x76F8;&#x5E94;&#xFF09;</p>
<p>MVC&#x6846;&#x67B6;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#xFF1A;</p>
<ol>
<li>&#x5C06;url&#x6620;&#x5C04;&#x5230;java&#x7C7B;&#x6216;java&#x7C7B;&#x7684;&#x65B9;&#x6CD5;</li>
<li>&#x5C01;&#x88C5;&#x7528;&#x6237;&#x63D0;&#x4EA4;&#x7684;&#x6570;&#x636E;</li>
<li>&#x5904;&#x7406;&#x8BF7;&#x6C42; -- &#x8C03;&#x7528;&#x76F8;&#x5173;&#x7684;&#x4E1A;&#x52A1;&#x5904;&#x7406; -- &#x5C01;&#x88C5;&#x6570;&#x636E;</li>
<li>&#x5C06;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6E32;&#x67D3; .jsp/html&#x7B49;&#x8868;&#x793A;&#x5C42;&#x6570;&#x636E;</li>
</ol>
<p>&#x5E38;&#x89C1;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;MVC&#x6846;&#x67B6;&#xFF1A;Structs&#x3001;SpringMVC&#x3001;<a href="http://ASP.NET">ASP.NET</a> MVC<br>
&#x5E38;&#x89C1;&#x7684;&#x524D;&#x7AEF;MVC&#x6846;&#x67B6;&#xFF1A;Vue&#x3001;Angularjs&#x3001;React</p>
<p>MVVM: M  -- V  --  V -- M ViewMode: &#x53CC;&#x5411;&#x7ED1;&#x5B9A;&#x3002;</p>
<p>SpringMVC &#x662F;&#x57FA;&#x4E8E;&#x7EAF;Java&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5E95;&#x5C42;&#x5B9E;&#x9645;&#x4E0A;&#x8FD8;&#x662F;Servlet&#x3002;</p>
<h1 class="mume-header" id="springmvc%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B">SpringMVC&#x6267;&#x884C;&#x6D41;&#x7A0B;</h1>

<p>Spring&#x7684;web&#x6846;&#x67B6;&#x56F4;&#x7ED5; DispatcherServlet&#xFF08;&#x8C03;&#x5EA6;Servlet&#xFF09;&#x8BBE;&#x8BA1;&#x3002;DispatcherServlet&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5C06;&#x8BF7;&#x6C42;&#x5206;&#x53D1;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x5904;&#x7406;&#x5668;&#x3002;&#x6B63;&#x56E0;&#x4E3A;SpringMVC&#x57FA;&#x4E8E;Spring&#xFF0C;&#x4F7F;&#x7528;&#x7EA6;&#x5B9A;&#x4F18;&#x4E8E;&#x8BBE;&#x7F6E;&#xFF0C;&#x80FD;&#x54E6;&#x80A1;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;junit&#x6D4B;&#x8BD5;&#xFF0C;&#x652F;&#x6301;Resuful&#x98CE;&#x683C;&#xFF0C;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x3001;&#x672C;&#x5730;&#x5316;&#x3001;&#x56FD;&#x9645;&#x5316;&#x3001;&#x6570;&#x636E;&#x9A8C;&#x8BC1;&#x3001;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x3001;&#x62E6;&#x622A;&#x5668;&#x7B49;&#x7B49;&#x7684;&#x4F18;&#x52BF;&#x3002;</p>
<p>&#x539F;&#x59CB;&#x7684; Javaweb &#x662F;&#x6BCF;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;Servlet&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6709;&#x591A;&#x4E2A;Servlet&#x6765;&#x5904;&#x7406;&#x4E0D;&#x540C;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;SpringMVC&#x5728;&#x591A;&#x4E2A;Servlet&#x4E0A;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x5C42;&#xFF0C;&#x7528;&#x6237;&#x53EA;&#x4E0E;DispatcherServlet&#x6253;&#x4EA4;&#x9053;&#xFF0C;&#x5C31;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x90FD;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;servlet&#x914D;&#x7F6E;web.xml&#x3002;</p>
<p><img src="../images/20220415/3.png" alt></p>
<ul>
<li>&#x524D;&#x7AEF;&#x5904;&#x7406;&#x5668;&#xFF1A;JSP&#xFF0C;JSP&#x8FD0;&#x884C;&#x5728;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x518D;&#x7ECF;&#x8FC7;Tomcat&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x3001;&#x6267;&#x884C;&#x4E0A;&#x9762;&#x7684;Java&#x4EE3;&#x7801;&#x3001;&#x8BBF;&#x95EE;Servlet&#x540E;&#xFF0C;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;HTML&#x6587;&#x4EF6;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</li>
</ul>
<p>&#x9ED8;&#x8BA4;&#x5DF2;&#x7ECF;&#x5C06;DispatcherServlet&#x914D;&#x7F6E;&#x597D;&#x4E86;&#x3002;</p>
<h2 class="mume-header" id="%E5%BC%80%E5%8F%91%E6%96%B9%E6%B3%95">&#x5F00;&#x53D1;&#x65B9;&#x6CD5;</h2>

<ol>
<li>&#x914D;&#x7F6E;web.xml&#x4E2D;&#x7684;DispatcherServlet</li>
<li>&#x5728;src/main/resources/ &#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;xxx.xml&#xFF0C;&#x7F16;&#x5199;<code>beans</code>&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;<br>
<img src="../images/20220415/4.png" alt></li>
<li>&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;Controller<br>
<img src="../images/20220415/5.png" alt></li>
</ol>

      </div>
      
      
    
    
    <script>
// config mermaid init call
// http://knsv.github.io/mermaid/#configuration
//
// You can edit the 'MERMAID_CONFIG' variable below.
MERMAID_CONFIG = {
  startOnLoad: false
}

if (window['MERMAID_CONFIG']) {
  window['MERMAID_CONFIG'].startOnLoad = false
  window['MERMAID_CONFIG'].cloneCssStyles = false
  window['MERMAID_CONFIG'].theme = "default"
}
mermaid.initialize(window['MERMAID_CONFIG'] || {})
if (typeof(window['Reveal']) !== 'undefined') {
  function mermaidRevealHelper(event) {
    var currentSlide = event.currentSlide
    var diagrams = currentSlide.querySelectorAll('.mermaid')
    for (var i = 0; i < diagrams.length; i++) {
      var diagram = diagrams[i]
      if (!diagram.hasAttribute('data-processed')) {
        mermaid.init(null, diagram, ()=> {
          Reveal.slide(event.indexh, event.indexv)
        })
      }
    }
  }
  Reveal.addEventListener('slidechanged', mermaidRevealHelper)
  Reveal.addEventListener('ready', mermaidRevealHelper)
} else {
  mermaid.init(null, document.getElementsByClassName('mermaid'))
}
</script>
    
    
    
    
    
  
    </body></html>